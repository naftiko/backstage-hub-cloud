apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Adjust Tax Quote
  description: >-
    Replace the persisted tax quote (identified by the given unique ID) with the
    provided quote request (represented by the **AdjustRequest**).Relevant for
    returns, partial refunds, and other Order modifications where there have
    been changes to the tax liabilities.The returned **Tax Quote** response is
    expected to be the same to a response returned by an equivalent response to
    **estimate** or **commit** methods.> Server URL> - For supporting tax
    providers, the server URL contains the tax provider's profile field; for
    example, `your_profile.example.com`.> - The Try it feature is not currently
    supported for this endpoint.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Adjust Tax Quote
      description: >-
        Replace the persisted tax quote (identified by the given unique ID) with the
        provided quote request (represented by the **AdjustRequest**).Relevant for
        returns, partial refunds, and other Order modifications where there have
        been changes to the tax liabilities.The returned **Tax Quote** response is
        expected to be the same to a response returned by an equivalent response to
        **estimate** or **commit** methods.> Server URL> - For supporting tax
        providers, the server URL contains the tax provider's profile field; for
        example, `your_profile.example.com`.> - The Try it feature is not currently
        supported for this endpoint.
    paths:
      /adjust:
        post:
          summary: Adjust Tax Quote
          description: >-
            Replace the persisted tax quote (identified by the given unique ID) with
            the provided quote request (represented by the
            **AdjustRequest**).Relevant for returns, partial refunds, and other
            Order modifications where there have been changes to the tax
            liabilities.The returned **Tax Quote** response is expected to be the
            same to a response returned by an equivalent response to **estimate** or
            **commit** methods.> Server URL> - For supporting tax providers, the
            server URL contains the tax provider's profile field; for example,
            `your_profile.example.com`.> - The Try it feature is not currently
            supported for this endpoint.
          operationId: adjustTaxQuote
          requestBody:
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/request-adjust'
          responses:
            '500':
              description: >-
                General response that points to an error on the tax provider side.
                These types of errors should be promptly resolved by the tax
                provider.
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/response-quote'
                  examples:
                    response:
                      value:
                        documents:
                          - external_id: sample-doc-123456789
                            id: shipping_14
                            items:
                              - id: product_13
                                price:
                                  amount_inclusive: 337.5
                                  amount_exclusive: 225
                                  total_tax: 112.5
                                  tax_rate: 0.5
                                  sales_tax_summary:
                                    - name: Brutal Tax
                                      rate: 0.5
                                      amount: 112.5
                                      tax_class:
                                        class_id: '0'
                                        name: Brutal Tax
                                        code: US
                                      id: Brutal Tax
                                type: item
                                wrapping:
                                  id: d2675662-6326-4a23-9107-ab71fa6a21a1
                                  price:
                                    amount_exclusive: 5
                                    amount_inclusive: 7.5
                                    sales_tax_summary:
                                      - amount: 2.5
                                        id: '1'
                                        name: BRUTAL TAX
                                        rate: 0.5
                                        tax_class:
                                          class_id: '6'
                                          code: US
                                          name: Wrapping
                                    tax_rate: 0.5
                                    total_tax: 2.5
                                  type: wrapping
                              - id: product_14
                                price:
                                  amount_inclusive: 300
                                  amount_exclusive: 200
                                  total_tax: 100
                                  tax_rate: 0.5
                                  sales_tax_summary:
                                    - name: Brutal Tax
                                      rate: 0.5
                                      amount: 100
                                      tax_class:
                                        class_id: '0'
                                        name: Brutal Tax
                                        code: US
                                      id: Brutal Tax
                                type: item
                                wrapping:
                                  id: d2675662-6326-4a23-9107-ab71fa6a21a1
                                  price:
                                    amount_exclusive: 5
                                    amount_inclusive: 7.5
                                    sales_tax_summary:
                                      - amount: 2.5
                                        id: '1'
                                        name: BRUTAL TAX
                                        rate: 0.5
                                        tax_class:
                                          class_id: '6'
                                          code: US
                                          name: Wrapping
                                    tax_rate: 0.5
                                    total_tax: 2.5
                                  type: wrapping
                            shipping:
                              id: shipping_14
                              price:
                                amount_inclusive: 7.5
                                amount_exclusive: 5
                                total_tax: 2.5
                                tax_rate: 0.5
                                sales_tax_summary:
                                  - name: Brutal Tax
                                    rate: 0.5
                                    amount: 2.5
                                    tax_class:
                                      class_id: '0'
                                      name: Brutal Tax
                                      code: US
                                    id: Brutal Tax
                              type: shipping
                            handling:
                              id: handling_14
                              price:
                                amount_inclusive: 0
                                amount_exclusive: 0
                                total_tax: 0
                                tax_rate: 0.5
                                sales_tax_summary:
                                  - name: Brutal Tax
                                    rate: 0.5
                                    amount: 0
                                    tax_class:
                                      class_id: '0'
                                      name: Brutal Tax
                                      code: US
                                    id: Brutal Tax
                              type: handling
                        id: '113'
