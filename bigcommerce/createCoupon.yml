apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Create A New Coupon
  description: >-
    Creates a *Coupon*.**Required Fields***   `name`*   `code`*   `type`*  
    `amount`*   `applies_to`**Read Only Fields***   `id`*  
    `num_uses`**Notes**The coupon type can be one of the following:*  
    `per_item_discount`*   `per_total_discount`*   `shipping_discount`*  
    `free_shipping`*   `percentage_discount`Legacy coupon codes only work with
    the store's default currency. Applying a coupon with any other currency
    other than the store's default will result in the error: "Coupons only apply
    to default currency."
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Create A New Coupon
      description: >-
        Creates a *Coupon*.**Required Fields***   `name`*   `code`*   `type`*  
        `amount`*   `applies_to`**Read Only Fields***   `id`*  
        `num_uses`**Notes**The coupon type can be one of the following:*  
        `per_item_discount`*   `per_total_discount`*   `shipping_discount`*  
        `free_shipping`*   `percentage_discount`Legacy coupon codes only work with
        the store's default currency. Applying a coupon with any other currency
        other than the store's default will result in the error: "Coupons only apply
        to default currency."
    paths:
      /coupons:
        post:
          summary: Create A New Coupon
          description: >-
            Creates a *Coupon*.**Required Fields***   `name`*   `code`*   `type`*  
            `amount`*   `applies_to`**Read Only Fields***   `id`*  
            `num_uses`**Notes**The coupon type can be one of the following:*  
            `per_item_discount`*   `per_total_discount`*   `shipping_discount`*  
            `free_shipping`*   `percentage_discount`Legacy coupon codes only work
            with the store's default currency. Applying a coupon with any other
            currency other than the store's default will result in the error:
            "Coupons only apply to default currency."
          operationId: createCoupon
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/coupon_Base'
          responses:
            '201':
              description: ''
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/coupon_Full'
                  example:
                    id: 1
                    name: $5 off
                    type: per_total_discount
                    amount: '5.0000'
                    min_purchase: '0.0000'
                    expires: ''
                    enabled: true
                    code: S2549JM0Y
                    applies_to:
                      entity: categories
                      ids:
                        - 0
                    num_uses: 2
                    max_uses: 0
                    max_uses_per_customer: 0
                    restricted_to: {}
                    shipping_methods: []
                    date_created: Tue, 13 Mar 2018 16:18:59 +0000
