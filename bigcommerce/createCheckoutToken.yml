apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Create Checkout Token
  description: >-
    Use the checkout token to display a confirmation page for a guest
    shopper.**Usage Notes** * The response from performing this POST request is
    a checkout token. * The checkout token is a single-use token that is not
    order-dependent. You cannot create this token after finalizing an order. *
    After completing the order, you can redirect the shopper to
    /order-confirmation/{orderId}?t={checkoutToken}. * After token validation,
    the /order-confirmation/{orderId} page displays. * The `ORDER_TOKEN` should
    match the order or the logged-in customer can access the order.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Create Checkout Token
      description: >-
        Use the checkout token to display a confirmation page for a guest
        shopper.**Usage Notes** * The response from performing this POST request is
        a checkout token. * The checkout token is a single-use token that is not
        order-dependent. You cannot create this token after finalizing an order. *
        After completing the order, you can redirect the shopper to
        /order-confirmation/{orderId}?t={checkoutToken}. * After token validation,
        the /order-confirmation/{orderId} page displays. * The `ORDER_TOKEN` should
        match the order or the logged-in customer can access the order.
    paths:
      /checkouts/{checkoutId}/token:
        post:
          summary: Create Checkout Token
          description: >-
            Use the checkout token to display a confirmation page for a guest
            shopper.**Usage Notes** * The response from performing this POST request
            is a checkout token. * The checkout token is a single-use token that is
            not order-dependent. You cannot create this token after finalizing an
            order. * After completing the order, you can redirect the shopper to
            /order-confirmation/{orderId}?t={checkoutToken}. * After token
            validation, the /order-confirmation/{orderId} page displays. * The
            `ORDER_TOKEN` should match the order or the logged-in customer can
            access the order.
          operationId: createCheckoutToken
          requestBody:
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    maxUses:
                      type: number
                      example: 1
                    ttl:
                      type: number
                      example: 86400
                      description: >-
                        Time-to-live (TTL) is the number of seconds the token is set
                        to exist before being discarded.
                      minimum: 1
                      maximum: 2592000
                examples:
                  example-1:
                    value:
                      maxUses: 1
                      ttl: 2
          responses:
            '422':
              description: Invalid JSON request body - missing or invalid data.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        example: '422'
                        description: The HTTP status code.
                        format: int32
                      title:
                        type: string
                        example: Invalid input
                        description: The error title describing the particular error.
                      type:
                        type: string
                        example: >-
                          https://developer.bigcommerce.com/api-docs/getting-started/api-status-codes
                        description: A link to a list of BigCommerce API status codes.
