apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Create Customers
  description: >-
    Creates Customers. Create up to 10 customers in one call.**Required
    Fields*** last_name* first_name* email**Required Fields Customer Address***
    first_name* city* country_code* last_name* address1**Required Fields
    Attributes*** Attributes must be
    [created](/docs/rest-management/customers/customer-attributes#create-a-customer-attribute)
    **BEFORE** creating a customer.* attribute_id* attribute_value -- This is
    input as a string, regardless of the
    [Type](/docs/rest-management/customers/customer-attributes#create-a-customer-attribute).**Notes**A
    customer can be created with global access or channel-specific access.*
    **Global access:**  * Make sure the channel has `allow_global_logins`
    enabled. This is on by default only for the default storefront. Find more
    info at [Customer Settings >
    Channel](/docs/rest-management/customers/customer-settings-channel).  * Omit
    `channel_ids` field, or provide `channel_ids: null`.* **Channel-specific
    access:**  * Provide a `channel_ids` array containing the channels
    accessible by the customer. This array cannot be empty.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Create Customers
      description: >-
        Creates Customers. Create up to 10 customers in one call.**Required
        Fields*** last_name* first_name* email**Required Fields Customer Address***
        first_name* city* country_code* last_name* address1**Required Fields
        Attributes*** Attributes must be
        [created](/docs/rest-management/customers/customer-attributes#create-a-customer-attribute)
        **BEFORE** creating a customer.* attribute_id* attribute_value -- This is
        input as a string, regardless of the
        [Type](/docs/rest-management/customers/customer-attributes#create-a-customer-attribute).**Notes**A
        customer can be created with global access or channel-specific access.*
        **Global access:**  * Make sure the channel has `allow_global_logins`
        enabled. This is on by default only for the default storefront. Find more
        info at [Customer Settings >
        Channel](/docs/rest-management/customers/customer-settings-channel).  * Omit
        `channel_ids` field, or provide `channel_ids: null`.* **Channel-specific
        access:**  * Provide a `channel_ids` array containing the channels
        accessible by the customer. This array cannot be empty.
    paths:
      /customers:
        post:
          summary: Create Customers
          description: >-
            Creates Customers. Create up to 10 customers in one call.**Required
            Fields*** last_name* first_name* email**Required Fields Customer
            Address*** first_name* city* country_code* last_name* address1**Required
            Fields Attributes*** Attributes must be
            [created](/docs/rest-management/customers/customer-attributes#create-a-customer-attribute)
            **BEFORE** creating a customer.* attribute_id* attribute_value -- This
            is input as a string, regardless of the
            [Type](/docs/rest-management/customers/customer-attributes#create-a-customer-attribute).**Notes**A
            customer can be created with global access or channel-specific access.*
            **Global access:**  * Make sure the channel has `allow_global_logins`
            enabled. This is on by default only for the default storefront. Find
            more info at [Customer Settings >
            Channel](/docs/rest-management/customers/customer-settings-channel).  *
            Omit `channel_ids` field, or provide `channel_ids: null`.*
            **Channel-specific access:**  * Provide a `channel_ids` array containing
            the channels accessible by the customer. This array cannot be empty.
          operationId: createCustomers
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: array
                  items:
                    $ref: '#/components/schemas/customer_Post'
                examples:
                  example-1:
                    value:
                      - email: string@example.com
                        first_name: string
                        last_name: string
                        company: string
                        phone: string
                        notes: string
                        tax_exempt_category: string
                        customer_group_id: 0
                        addresses:
                          - address1: Addr 1
                            address2: ''
                            address_type: residential
                            city: San Francisco
                            company: History
                            country_code: US
                            first_name: Ronald
                            last_name: Swimmer
                            phone: '707070707'
                            postal_code: '33333'
                            state_or_province: California
                            form_fields:
                              - name: test
                                value: test
                        authentication:
                          force_password_reset: true
                          new_password: string123
                        accepts_product_review_abandoned_cart_emails: true
                        store_credit_amounts:
                          - amount: 43.15
                        origin_channel_id: 1
                        channel_ids:
                          - 1
                        form_fields:
                          - name: test
                            value: test
          responses:
            '422':
              description: >-
                The *Customer* was not valid. This is the result of missing required
                fields or trying to edit a read only field. See the response for
                more details.
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/ErrorResponse'
                  examples:
                    response:
                      value:
                        status: 422
                        title: Create customers failed.
                        type: /api-docs/getting-started/api-status-codes
                        errors:
                          .customer_create: Error creating customers
