apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Commit Tax Quote
  description: >-
    Submit the quote request to be persisted by the enabled third-party tax
    provider. A commit operation is intended to be submitted once only, when the
    Order has been confirmed and paid.> Server URL> - For supporting tax
    providers, the server URL contains the tax provider's profile field; for
    example, `your_profile.example.com`.> - The Try it feature is not currently
    supported for this endpoint.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Commit Tax Quote
      description: >-
        Submit the quote request to be persisted by the enabled third-party tax
        provider. A commit operation is intended to be submitted once only, when the
        Order has been confirmed and paid.> Server URL> - For supporting tax
        providers, the server URL contains the tax provider's profile field; for
        example, `your_profile.example.com`.> - The Try it feature is not currently
        supported for this endpoint.
    paths:
      /commit:
        post:
          summary: Commit Tax Quote
          description: >-
            Submit the quote request to be persisted by the enabled third-party tax
            provider. A commit operation is intended to be submitted once only, when
            the Order has been confirmed and paid.> Server URL> - For supporting tax
            providers, the server URL contains the tax provider's profile field; for
            example, `your_profile.example.com`.> - The Try it feature is not
            currently supported for this endpoint.
          operationId: commitTaxQuote
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/request-quote'
                examples:
                  example:
                    value:
                      id: '113'
                      currency_code: USD
                      customer:
                        customer_id: '0'
                        customer_group_id: '0'
                        taxability_code: ''
                      transaction_date: '2019-08-13T03:40:15+00:00'
                      documents:
                        - id: shipping_14
                          billing_address:
                            line1: 402 S Vine St
                            line2: ''
                            city: Van Wert
                            region_name: Ohio
                            region_code: OH
                            country_name: United States
                            country_code: US
                            postal_code: '45891'
                            company_name: ''
                            type: RESIDENTIAL
                          destination_address:
                            line1: 402 S Vine St
                            line2: ''
                            city: Van Wert
                            region_name: Ohio
                            region_code: OH
                            country_name: United States
                            country_code: US
                            postal_code: '45891'
                            company_name: ''
                            type: RESIDENTIAL
                          origin_address:
                            line1: 2139 W ANDERSON LN
                            line2: ''
                            city: AUSTIN
                            region_name: Texas
                            region_code: TX
                            country_name: United States
                            country_code: US
                            postal_code: '78757'
                            company_name: ''
                            type: COMMERCIAL
                          shipping:
                            id: shipping_14
                            item_code: Flat Rate
                            name: Shipping to Van Wert, United States 45891
                            price:
                              amount: 10
                              tax_inclusive: false
                            quantity: 1
                            tax_class:
                              code: ''
                              class_id: '6'
                              name: Shipping
                            tax_exempt: false
                            type: shipping
                          handling:
                            id: handling_14
                            item_code: Flat Rate
                            name: Handling for Van Wert, United States 45891
                            price:
                              amount: 0
                              tax_inclusive: false
                            quantity: 1
                            tax_class:
                              code: ''
                              class_id: '6'
                              name: Handling
                            tax_exempt: false
                            type: handling
                          items:
                            - id: product_13
                              item_code: ABS
                              name: '[Sample] Able Brewing System'
                              price:
                                amount: 450
                                tax_inclusive: false
                              quantity: 2
                              tax_class:
                                code: ''
                                class_id: '0'
                                name: Default Tax Class
                              tax_exempt: false
                              type: item
                              wrapping:
                                id: product_14
                                item_code: ''
                                name: 'Wrapping: Holiday'
                                price:
                                  amount: 5
                                  tax_inclusive: false
                                quantity: 1
                                tax_class:
                                  code: ''
                                  class_id: '6'
                                  name: Wrapping
                                tax_exempt: false
                                type: wrapping
                            - id: product_14
                              item_code: CLC
                              name: '[Sample] Canvas Laundry Cart'
                              price:
                                amount: 200
                                tax_inclusive: false
                              quantity: 1
                              tax_class:
                                code: ''
                                class_id: '0'
                                name: Default Tax Class
                              tax_exempt: false
                              type: item
                              wrapping:
                                id: product_14
                                item_code: ''
                                name: 'Wrapping: Holiday'
                                price:
                                  amount: 5
                                  tax_inclusive: false
                                quantity: 1
                                tax_class:
                                  code: ''
                                  class_id: '6'
                                  name: Wrapping
                                tax_exempt: false
                                type: wrapping
          responses:
            '500':
              description: >-
                General response that points to an error on the tax provider side.
                These types of errors should be promptly resolved by the tax
                provider.
