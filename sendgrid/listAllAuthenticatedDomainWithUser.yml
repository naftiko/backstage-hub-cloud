apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: List All The Authenticated Domains Associated With The Given User.
  description: >-
    **This endpoint allows you to retrieve all of the authenticated domains that
    have been assigned to a specific subuser.**This functionality allows
    subusers to send mail using their parent's domain. Authenticated domains can
    be associated with (i.e. assigned to) subusers from a parent account, and a
    subuser can have up to five associated domains. To associate an
    authenticated domain with a subuser, the parent account must first
    authenticate and validate the domain. The parent may then associate the
    authenticated domain via the subuser management tools.When selecting a
    domain to send email from, SendGrid checks for domains in the following
    order and chooses the first one that appears in the hierarchy: 1. Domain
    assigned by the subuser that matches the email's `From` address domain. 2.
    The subuser's default domain. 3. Domain assigned by the parent user that
    matches the `From` address domain. 4. Parent user's default domain. 5.
    sendgrid.net
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: List All The Authenticated Domains Associated With The Given User.
      description: >-
        **This endpoint allows you to retrieve all of the authenticated domains that
        have been assigned to a specific subuser.**This functionality allows
        subusers to send mail using their parent's domain. Authenticated domains can
        be associated with (i.e. assigned to) subusers from a parent account, and a
        subuser can have up to five associated domains. To associate an
        authenticated domain with a subuser, the parent account must first
        authenticate and validate the domain. The parent may then associate the
        authenticated domain via the subuser management tools.When selecting a
        domain to send email from, SendGrid checks for domains in the following
        order and chooses the first one that appears in the hierarchy: 1. Domain
        assigned by the subuser that matches the email's `From` address domain. 2.
        The subuser's default domain. 3. Domain assigned by the parent user that
        matches the `From` address domain. 4. Parent user's default domain. 5.
        sendgrid.net
    paths:
      /v3/whitelabel/domains/subuser/all:
        get:
          summary: List All The Authenticated Domains Associated With The Given User.
          description: >-
            **This endpoint allows you to retrieve all of the authenticated domains
            that have been assigned to a specific subuser.**This functionality
            allows subusers to send mail using their parent's domain. Authenticated
            domains can be associated with (i.e. assigned to) subusers from a parent
            account, and a subuser can have up to five associated domains. To
            associate an authenticated domain with a subuser, the parent account
            must first authenticate and validate the domain. The parent may then
            associate the authenticated domain via the subuser management tools.When
            selecting a domain to send email from, SendGrid checks for domains in
            the following order and chooses the first one that appears in the
            hierarchy: 1. Domain assigned by the subuser that matches the email's
            `From` address domain. 2. The subuser's default domain. 3. Domain
            assigned by the parent user that matches the `From` address domain. 4.
            Parent user's default domain. 5. sendgrid.net
          operationId: listAllAuthenticatedDomainWithUser
          responses:
            '200':
              description: ''
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                          description: The ID of the authenticated domain.
                        user_id:
                          type: number
                          description: The ID of the user that this domain is associated with.
                        subdomain:
                          type: string
                          description: >-
                            The subdomain or custom return-path to use for this
                            authenticated domain.
                        domain:
                          type: string
                          description: The domain to be authenticated.
                        username:
                          type: string
                          description: The username that this domain will be associated with.
                        ips:
                          type: array
                          description: >-
                            The IPs to be included in the custom SPF record for this
                            authenticated domain.
                          items:
                            type: string
                        custom_spf:
                          type: boolean
                          description: >-
                            Indicates whether this authenticated domain uses custom
                            SPF.
                        default:
                          type: boolean
                          description: Indicates if this is the default authenticated domain.
                        legacy:
                          type: boolean
                          description: >-
                            Indicates if this authenticated domain was created using
                            the legacy whitelabel tool. If it is a legacy
                            whitelabel, it will still function, but you'll need to
                            create a new authenticated domain if you need to update
                            it.
                        automatic_security:
                          type: boolean
                          description: >-
                            Indicates if this authenticated domain uses automated
                            security.
                        valid:
                          type: boolean
                          description: Indicates if this is a valid authenticated domain.
                        dns:
                          type: object
                          description: The DNS records used to authenticate the sending domain.
                          required:
                            - mail_cname
                            - dkim1
                            - dkim2
                          properties:
                            mail_cname:
                              type: object
                              description: >-
                                The CNAME for your sending domain that points to
                                sendgrid.net.
                              required:
                                - valid
                                - type
                                - host
                                - data
                              properties:
                                valid:
                                  type: boolean
                                  description: Indicates if this is a valid CNAME.
                                type:
                                  type: string
                                  description: The type of DNS record.
                                host:
                                  type: string
                                  description: The domain that this CNAME is created for.
                                  format: hostname
                                data:
                                  type: string
                                  description: The CNAME record.
                            dkim1:
                              type: object
                              description: A DNS record.
                              required:
                                - valid
                                - type
                                - host
                                - data
                              properties:
                                valid:
                                  type: boolean
                                  description: Indicates if this is a valid DNS record.
                                type:
                                  type: string
                                  description: The type of DNS record.
                                host:
                                  type: string
                                  description: The domain that this DNS record was created for.
                                data:
                                  type: string
                                  description: The DNS record.
                            dkim2:
                              type: object
                              description: A DNS record.
                              required:
                                - valid
                                - type
                                - host
                                - data
                              properties:
                                valid:
                                  type: boolean
                                  description: Indicates if this is a valid DNS record.
                                type:
                                  type: string
                                  description: The type of DNS record.
                                host:
                                  type: string
                                  description: The domain that this DNS record was created for.
                                data:
                                  type: string
                                  description: The DNS record.
                      required:
                        - automatic_security
                        - custom_spf
                        - default
                        - dns
                        - domain
                        - id
                        - ips
                        - legacy
                        - subdomain
                        - user_id
                        - username
                        - valid
                  examples:
                    response:
                      value:
                        - id: 1
                          domain: example.com
                          subdomain: mail
                          username: jdoe
                          user_id: 7
                          ips: []
                          custom_spf: true
                          default: false
                          legacy: false
                          automatic_security: false
                          valid: false
                          dns:
                            mail_cname:
                              valid: true
                              type: cname
                              host: mail.example.com
                              data: u7.wl.sendgrid.net
                            dkim1:
                              valid: true
                              type: cname
                              host: s1._domainkey.example.com
                              data: s1._domainkey.u7.wl.sendgrid.net
                            dkim2:
                              valid: true
                              type: cname
                              host: s2._domainkey.example.com
                              data: s2._domainkey.u7.wl.sendgrid.net
                        - id: 2
                          domain: example.com
                          subdomain: mail2
                          username: jdoe2
                          user_id: 7
                          ips: []
                          custom_spf: true
                          default: true
                          legacy: false
                          automatic_security: true
                          valid: false
                          dns:
                            mail_cname:
                              valid: true
                              type: cname
                              host: mail2.example2.com
                              data: u7.sgsandbox.net
                            dkim1:
                              host: s1._domainkey.example.com
                              type: cname
                              data: s1._domainkey.u7.wl.sgsandbox.net
                              valid: true
                            dkim2:
                              valid: true
                              type: cname
                              host: s2._domainkey.example2.com
                              data: s2._domainkey.u7.w1.sgsandbox.net
