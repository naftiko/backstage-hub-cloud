apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Update Teammate's Permissions
  description: >-
    **This endpoint allows you to update a teammate’s permissions.**To turn a
    teammate into an admin, the request body should contain an `is_admin` set to
    `true`. Otherwise, set `is_admin` to `false` and pass in all the scopes that
    a teammate should have.**Only the parent user or other admin teammates can
    update another teammate’s permissions.****Admin users can only update
    permissions.**
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Update Teammate's Permissions
      description: >-
        **This endpoint allows you to update a teammate’s permissions.**To turn a
        teammate into an admin, the request body should contain an `is_admin` set to
        `true`. Otherwise, set `is_admin` to `false` and pass in all the scopes that
        a teammate should have.**Only the parent user or other admin teammates can
        update another teammate’s permissions.****Admin users can only update
        permissions.**
    paths:
      /v3/teammates/{username}:
        patch:
          summary: Update Teammate's Permissions
          description: >-
            **This endpoint allows you to update a teammate’s permissions.**To turn
            a teammate into an admin, the request body should contain an `is_admin`
            set to `true`. Otherwise, set `is_admin` to `false` and pass in all the
            scopes that a teammate should have.**Only the parent user or other admin
            teammates can update another teammate’s permissions.****Admin users can
            only update permissions.**
          operationId: updateTeammate
          requestBody:
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    scopes:
                      type: array
                      description: >-
                        Provide list of scopes that should be given to teammate. If
                        specifying list of scopes, is_admin should be set to False.
                      items:
                        type: string
                    is_admin:
                      type: boolean
                      description: >-
                        Set to True if this teammate should be promoted to an admin
                        user. If True, scopes should be an empty array.
                  required:
                    - scopes
                    - is_admin
                  example:
                    scopes:
                      - user.profile.read
                      - user.profile.edit
                    is_admin: false
          responses:
            '404':
              description: ''
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      errors:
                        type: array
                        items:
                          type: object
                          properties:
                            message:
                              type: string
                            field:
                              type: string
                  examples:
                    response:
                      value:
                        errors:
                          - message: username not found
                            field: username
