apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Search Contacts
  description: >-
    **Use this endpoint to locate contacts**.The request body's `query` field
    accepts valid
    [SGQL](https://sendgrid.com/docs/for-developers/sending-email/segmentation-query-language/)
    for searching for a contact.Because contact emails are stored in lower case,
    using SGQL to search by email address requires the provided email address to
    be in lower case. The SGQL `lower()` function can be used for this.Only the
    first 50 contacts that meet the search criteria will be returned.If the
    query takes longer than 20 seconds, a `408 Request Timeout` status will be
    returned.Formatting the `created_at` and `updated_at` values as Unix
    timestamps is deprecated. Instead, they are returned as ISO format as
    string.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Search Contacts
      description: >-
        **Use this endpoint to locate contacts**.The request body's `query` field
        accepts valid
        [SGQL](https://sendgrid.com/docs/for-developers/sending-email/segmentation-query-language/)
        for searching for a contact.Because contact emails are stored in lower case,
        using SGQL to search by email address requires the provided email address to
        be in lower case. The SGQL `lower()` function can be used for this.Only the
        first 50 contacts that meet the search criteria will be returned.If the
        query takes longer than 20 seconds, a `408 Request Timeout` status will be
        returned.Formatting the `created_at` and `updated_at` values as Unix
        timestamps is deprecated. Instead, they are returned as ISO format as
        string.
    paths:
      /v3/marketing/contacts/search:
        post:
          summary: Search Contacts
          description: >-
            **Use this endpoint to locate contacts**.The request body's `query`
            field accepts valid
            [SGQL](https://sendgrid.com/docs/for-developers/sending-email/segmentation-query-language/)
            for searching for a contact.Because contact emails are stored in lower
            case, using SGQL to search by email address requires the provided email
            address to be in lower case. The SGQL `lower()` function can be used for
            this.Only the first 50 contacts that meet the search criteria will be
            returned.If the query takes longer than 20 seconds, a `408 Request
            Timeout` status will be returned.Formatting the `created_at` and
            `updated_at` values as Unix timestamps is deprecated. Instead, they are
            returned as ISO format as string.
          operationId: searchContact
          requestBody:
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    query:
                      type: string
                      description: An SGQL search string or other pattern.
                  required:
                    - query
                  example:
                    query: >-
                      email LIKE 'ENTER_COMPLETE_OR_PARTIAL_EMAIL_ADDRESS_HERE%' AND
                      CONTAINS(list_ids, 'YOUR_LIST_IDs')
          responses:
            '500':
              description: ''
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      errors:
                        type: array
                        items:
                          type: object
                          properties:
                            message:
                              type: string
