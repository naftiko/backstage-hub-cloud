apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Retrieve Monthly Stats For All Subusers
  description: >-
    **This endpoint allows you to retrieve the monthly email statistics for all
    subusers over the given date range.**When using the `sort_by_metric` to sort
    your stats by a specific metric, you can not sort by the following
    metrics:`bounce_drops`, `deferred`, `invalid_emails`, `processed`,
    `spam_report_drops`, `spam_reports`, or `unsubscribe_drops`.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Retrieve Monthly Stats For All Subusers
      description: >-
        **This endpoint allows you to retrieve the monthly email statistics for all
        subusers over the given date range.**When using the `sort_by_metric` to sort
        your stats by a specific metric, you can not sort by the following
        metrics:`bounce_drops`, `deferred`, `invalid_emails`, `processed`,
        `spam_report_drops`, `spam_reports`, or `unsubscribe_drops`.
    paths:
      /v3/subusers/stats/monthly:
        get:
          summary: Retrieve Monthly Stats For All Subusers
          description: >-
            **This endpoint allows you to retrieve the monthly email statistics for
            all subusers over the given date range.**When using the `sort_by_metric`
            to sort your stats by a specific metric, you can not sort by the
            following metrics:`bounce_drops`, `deferred`, `invalid_emails`,
            `processed`, `spam_report_drops`, `spam_reports`, or
            `unsubscribe_drops`.
          operationId: listMonthlyStat
          responses:
            '200':
              description: ''
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/SubuserStats'
                  examples:
                    response:
                      value:
                        date: '2016-02-01'
                        stats:
                          - first_name: John
                            last_name: Doe
                            metrics:
                              blocks: 0
                              bounce_drops: 0
                              bounces: 0
                              clicks: 0
                              deferred: 0
                              delivered: 0
                              invalid_emails: 0
                              opens: 1
                              processed: 0
                              requests: 100
                              spam_report_drops: 0
                              spam_reports: 99
                              unique_clicks: 0
                              unique_opens: 0
                              unsubscribe_drops: 0
                              unsubscribes: 0
                            name: user1
                            type: subuser
                          - first_name: Jane
                            last_name: Doe
                            metrics:
                              blocks: 0
                              bounce_drops: 0
                              bounces: 0
                              clicks: 5
                              deferred: 0
                              delivered: 0
                              invalid_emails: 0
                              opens: 10
                              processed: 10
                              requests: 10
                              spam_report_drops: 0
                              spam_reports: 0
                              unique_clicks: 0
                              unique_opens: 0
                              unsubscribe_drops: 0
                              unsubscribes: 0
                            name: user2
                            type: subuser
