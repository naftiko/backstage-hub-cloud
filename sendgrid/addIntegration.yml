apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Createintegration
  description: >-
    This endpoint creates an Integration for email event forwarding. Each
    Integration has a maximum number of allowed Integration instances per user.
    For example, users can create up to 10 Segment Integrations.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Createintegration
      description: >-
        This endpoint creates an Integration for email event forwarding. Each
        Integration has a maximum number of allowed Integration instances per user.
        For example, users can create up to 10 Segment Integrations.
    paths:
      /v3/marketing/integrations:
        post:
          summary: Createintegration
          description: >-
            This endpoint creates an Integration for email event forwarding. Each
            Integration has a maximum number of allowed Integration instances per
            user. For example, users can create up to 10 Segment Integrations.
          operationId: addIntegration
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/IntegrationInput'
                example:
                  filters:
                    email_events:
                      - click
                      - drop
                      - open
                      - processed
                      - delivered
                  destination: Segment
                  label: optional label
                  properties:
                    destination_region: US
                    write_key: a123456
          responses:
            '500':
              description: Internal Error
              content:
                application/json:
                  schema:
                    properties:
                      errors:
                        type: array
                        items:
                          $ref: '#/components/schemas/InternalError'
