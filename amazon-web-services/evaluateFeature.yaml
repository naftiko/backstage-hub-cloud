apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: evaluatefeature
  description: >-
    This operation assigns a feature variation to one given user session. You
    pass in an entityID that represents the user. Evidently then checks the
    evaluation rules and assigns the variation. The first rules that are
    evaluated are the override rules. If the user's entityID matches an override
    rule, the user is served the variation specified by that rule. If there is a
    current launch with this feature that uses segment overrides, and if the
    user session's evaluationContext matches a segment rule defined in a segment
    override, the configuration in the segment overrides is used. For more
    information about segments, see CreateSegment and Use segments to focus your
    audience. If there is a launch with no segment overrides, the user might be
    assigned to a variation in the launch. The chance of this depends on the
    percentage of users that are allocated to that launch. If the user is
    enrolled in the launch, the variation they are served depends on the
    allocation of the various feature variations used for the launch. If the
    user is not assigned to a launch, and there is an ongoing experiment for
    this feature, the user might be assigned to a variation in the experiment.
    The chance of this depends on the percentage of users that are allocated to
    that experiment. If the experiment uses a segment, then only user sessions
    with evaluationContext values that match the segment rule are used in the
    experiment. If the user is enrolled in the experiment, the variation they
    are served depends on the allocation of the various feature variations used
    for the experiment.  If the user is not assigned to a launch or experiment,
    they are served the default variation.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Evaluatefeature
      description: >-
        This operation assigns a feature variation to one given user session. You
        pass in an entityID that represents the user. Evidently then checks the
        evaluation rules and assigns the variation. The first rules that are
        evaluated are the override rules. If the user's entityID matches an override
        rule, the user is served the variation specified by that rule. If there is a
        current launch with this feature that uses segment overrides, and if the
        user session's evaluationContext matches a segment rule defined in a segment
        override, the configuration in the segment overrides is used. For more
        information about segments, see CreateSegment and Use segments to focus your
        audience. If there is a launch with no segment overrides, the user might be
        assigned to a variation in the launch. The chance of this depends on the
        percentage of users that are allocated to that launch. If the user is
        enrolled in the launch, the variation they are served depends on the
        allocation of the various feature variations used for the launch. If the
        user is not assigned to a launch, and there is an ongoing experiment for
        this feature, the user might be assigned to a variation in the experiment.
        The chance of this depends on the percentage of users that are allocated to
        that experiment. If the experiment uses a segment, then only user sessions
        with evaluationContext values that match the segment rule are used in the
        experiment. If the user is enrolled in the experiment, the variation they
        are served depends on the allocation of the various feature variations used
        for the experiment.  If the user is not assigned to a launch or experiment,
        they are served the default variation.
    paths:
      /projects/{project}/evaluations/{feature}:
        POST:
          summary: Evaluatefeature
          description: >-
            This operation assigns a feature variation to one given user session.
            You pass in an entityID that represents the user. Evidently then checks
            the evaluation rules and assigns the variation. The first rules that are
            evaluated are the override rules. If the user's entityID matches an
            override rule, the user is served the variation specified by that rule.
            If there is a current launch with this feature that uses segment
            overrides, and if the user session's evaluationContext matches a segment
            rule defined in a segment override, the configuration in the segment
            overrides is used. For more information about segments, see
            CreateSegment and Use segments to focus your audience. If there is a
            launch with no segment overrides, the user might be assigned to a
            variation in the launch. The chance of this depends on the percentage of
            users that are allocated to that launch. If the user is enrolled in the
            launch, the variation they are served depends on the allocation of the
            various feature variations used for the launch. If the user is not
            assigned to a launch, and there is an ongoing experiment for this
            feature, the user might be assigned to a variation in the experiment.
            The chance of this depends on the percentage of users that are allocated
            to that experiment. If the experiment uses a segment, then only user
            sessions with evaluationContext values that match the segment rule are
            used in the experiment. If the user is enrolled in the experiment, the
            variation they are served depends on the allocation of the various
            feature variations used for the experiment.  If the user is not assigned
            to a launch or experiment, they are served the default variation.
          operationId: evaluateFeature
