apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Export Archived Issue(s)
  description: >-
    Enables admins to retrieve details of all archived issues. Upon a successful
    request, the admin who submitted it will receive an email with a link to
    download a CSV file with the issue details.Note that this API only exports
    the values of system fields and archival-specific fields (`ArchivedBy` and
    `ArchivedDate`). Custom fields aren't
    supported.**[Permissions](#permissions) required:** Jira admin or site
    admin: [global
    permission](https://confluence.atlassian.com/x/x4dKLg)**License required:**
    Premium or Enterprise**Signed-in users only:** This API can't be accessed
    anonymously.**Rate limiting:** Only a single request can be active at any
    given time.  
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Export Archived Issue(s)
      description: >-
        Enables admins to retrieve details of all archived issues. Upon a successful
        request, the admin who submitted it will receive an email with a link to
        download a CSV file with the issue details.Note that this API only exports
        the values of system fields and archival-specific fields (`ArchivedBy` and
        `ArchivedDate`). Custom fields aren't
        supported.**[Permissions](#permissions) required:** Jira admin or site
        admin: [global
        permission](https://confluence.atlassian.com/x/x4dKLg)**License required:**
        Premium or Enterprise**Signed-in users only:** This API can't be accessed
        anonymously.**Rate limiting:** Only a single request can be active at any
        given time.  
    paths:
      /rest/api/3/issues/archive/export:
        put:
          summary: Export Archived Issue(s)
          description: >-
            Enables admins to retrieve details of all archived issues. Upon a
            successful request, the admin who submitted it will receive an email
            with a link to download a CSV file with the issue details.Note that this
            API only exports the values of system fields and archival-specific
            fields (`ArchivedBy` and `ArchivedDate`). Custom fields aren't
            supported.**[Permissions](#permissions) required:** Jira admin or site
            admin: [global
            permission](https://confluence.atlassian.com/x/x4dKLg)**License
            required:** Premium or Enterprise**Signed-in users only:** This API
            can't be accessed anonymously.**Rate limiting:** Only a single request
            can be active at any given time.  
          operationId: exportArchivedIssues
          requestBody:
            description: >-
              You can filter the issues in your request by the `projects`,
              `archivedBy`, `archivedDate`, `issueTypes`, and `reporters` fields.
              All filters are optional. If you don't provide any filters, you'll get
              a list of up to one million archived issues.
            required: true
            content:
              application/json:
                example:
                  archivedBy:
                    - uuid-rep-001
                    - uuid-rep-002
                  archivedDate:
                    dateAfter: '2023-01-01'
                    dateBefore: '2023-01-12'
                  archivedDateRange:
                    dateAfter: '2023-01-01'
                    dateBefore: '2023-01-12'
                  issueTypes:
                    - '10001'
                    - '10002'
                  projects:
                    - FOO
                    - BAR
                  reporters:
                    - uuid-rep-001
                    - uuid-rep-002
                schema:
                  $ref: '#/components/schemas/ArchivedIssuesFilterRequest'
          responses:
            '412':
              content:
                application/json:
                  example: >-
                    {"errorMessages":["An issue archival task is already running
                    with ID 1010. To start a new one, cancel the task or wait for it
                    to finish."],"errors":{}}
              description: Returned if a request to export archived issues is already running.
