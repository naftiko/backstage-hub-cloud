apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Update Workflow Scheme
  description: >-
    Updates company-managed and team-managed project workflow schemes. This API
    doesn't have a concept of draft, so any changes made to a workflow scheme
    are immediately available. When changing the available statuses for issue
    types, an [asynchronous task](#async) migrates the issues as defined in the
    provided mappings.**[Permissions](#permissions) required:** *  *Administer
    Jira* project permission to update all, including global-scoped, workflow
    schemes. *  *Administer projects* project permission to update
    project-scoped workflow schemes.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Update Workflow Scheme
      description: >-
        Updates company-managed and team-managed project workflow schemes. This API
        doesn't have a concept of draft, so any changes made to a workflow scheme
        are immediately available. When changing the available statuses for issue
        types, an [asynchronous task](#async) migrates the issues as defined in the
        provided mappings.**[Permissions](#permissions) required:** *  *Administer
        Jira* project permission to update all, including global-scoped, workflow
        schemes. *  *Administer projects* project permission to update
        project-scoped workflow schemes.
    paths:
      /rest/api/3/workflowscheme/update:
        post:
          summary: Update Workflow Scheme
          description: >-
            Updates company-managed and team-managed project workflow schemes. This
            API doesn't have a concept of draft, so any changes made to a workflow
            scheme are immediately available. When changing the available statuses
            for issue types, an [asynchronous task](#async) migrates the issues as
            defined in the provided mappings.**[Permissions](#permissions)
            required:** *  *Administer Jira* project permission to update all,
            including global-scoped, workflow schemes. *  *Administer projects*
            project permission to update project-scoped workflow schemes.
          operationId: updateSchemes
          requestBody:
            required: true
            content:
              application/json:
                example:
                  defaultWorkflowId: 3e59db0f-ed6c-47ce-8d50-80c0c4572677
                  description: description
                  id: '10000'
                  name: name
                  statusMappingsByIssueTypeOverride:
                    - issueTypeId: '10001'
                      statusMappings:
                        - newStatusId: '2'
                          oldStatusId: '1'
                        - newStatusId: '4'
                          oldStatusId: '3'
                    - issueTypeId: '10002'
                      statusMappings:
                        - newStatusId: '4'
                          oldStatusId: '1'
                        - newStatusId: '2'
                          oldStatusId: '3'
                  statusMappingsByWorkflows:
                    - newWorkflowId: 3e59db0f-ed6c-47ce-8d50-80c0c4572677
                      oldWorkflowId: 3e59db0f-ed6c-47ce-8d50-80c0c4572677
                      statusMappings:
                        - newStatusId: '2'
                          oldStatusId: '1'
                        - newStatusId: '4'
                          oldStatusId: '3'
                  version:
                    id: 527213fc-bc72-400f-aae0-df8d88db2c8a
                    versionNumber: 1
                  workflowsForIssueTypes:
                    - issueTypeIds:
                        - '10000'
                        - '10003'
                      workflowId: 3e59db0f-ed6c-47ce-8d50-80c0c4572677
                    - issueTypeIds:
                        - 10001`
                        - '10002'
                      workflowId: 3f83dg2a-ns2n-56ab-9812-42h5j1461629
                schema:
                  $ref: '#/components/schemas/WorkflowSchemeUpdateRequest'
          responses:
            '401':
              description: >-
                Returned if the authentication credentials are incorrect or missing,
                or the caller doesn't have permissions to perform the operation.
