apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Validate Update Workflows
  description: >-
    Validate the payload for bulk update workflows.**[Permissions](#permissions)
    required:** *  *Administer Jira* project permission to create all, including
    global-scoped, workflows *  *Administer projects* project permissions to
    create project-scoped workflows
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Validate Update Workflows
      description: >-
        Validate the payload for bulk update workflows.**[Permissions](#permissions)
        required:** *  *Administer Jira* project permission to create all, including
        global-scoped, workflows *  *Administer projects* project permissions to
        create project-scoped workflows
    paths:
      /rest/api/3/workflows/update/validation:
        post:
          summary: Validate Update Workflows
          description: >-
            Validate the payload for bulk update
            workflows.**[Permissions](#permissions) required:** *  *Administer Jira*
            project permission to create all, including global-scoped, workflows * 
            *Administer projects* project permissions to create project-scoped
            workflows
          operationId: validateUpdateWorkflows
          requestBody:
            required: true
            content:
              application/json:
                example:
                  payload:
                    statuses:
                      - description: ''
                        name: To Do
                        statusCategory: TODO
                        statusReference: f0b24de5-25e7-4fab-ab94-63d81db6c0c0
                      - description: ''
                        name: In Progress
                        statusCategory: IN_PROGRESS
                        statusReference: c7a35bf0-c127-4aa6-869f-4033730c61d8
                      - description: ''
                        name: Done
                        statusCategory: DONE
                        statusReference: 6b3fc04d-3316-46c5-a257-65751aeb8849
                    workflows:
                      - defaultStatusMappings:
                          - newStatusReference: '10011'
                            oldStatusReference: '10010'
                        description: ''
                        id: '10001'
                        startPointLayout:
                          x: -100.00030899047852
                          'y': -153.00020599365234
                        statusMappings:
                          - issueTypeId: '10002'
                            projectId: '10003'
                            statusMigrations:
                              - newStatusReference: '10011'
                                oldStatusReference: '10010'
                        statuses:
                          - layout:
                              x: 114.99993896484375
                              'y': -16
                            properties: {}
                            statusReference: f0b24de5-25e7-4fab-ab94-63d81db6c0c0
                          - layout:
                              x: 317.0000915527344
                              'y': -16
                            properties: {}
                            statusReference: c7a35bf0-c127-4aa6-869f-4033730c61d8
                          - layout:
                              x: 508.000244140625
                              'y': -16
                            properties: {}
                            statusReference: 6b3fc04d-3316-46c5-a257-65751aeb8849
                        transitions:
                          - actions: []
                            description: ''
                            from: []
                            id: '1'
                            name: Create
                            properties: {}
                            to:
                              statusReference: f0b24de5-25e7-4fab-ab94-63d81db6c0c0
                            triggers: []
                            type: INITIAL
                            validators: []
                          - actions: []
                            description: ''
                            from: []
                            id: '11'
                            name: To Do
                            properties: {}
                            to:
                              statusReference: f0b24de5-25e7-4fab-ab94-63d81db6c0c0
                            triggers: []
                            type: GLOBAL
                            validators: []
                          - actions: []
                            description: ''
                            from: []
                            id: '21'
                            name: In Progress
                            properties: {}
                            to:
                              statusReference: c7a35bf0-c127-4aa6-869f-4033730c61d8
                            triggers: []
                            type: GLOBAL
                            validators: []
                          - actions: []
                            description: ''
                            from: []
                            id: '31'
                            name: Done
                            properties: {}
                            to:
                              statusReference: 6b3fc04d-3316-46c5-a257-65751aeb8849
                            triggers: []
                            type: GLOBAL
                            validators: []
                        version:
                          id: 6f6c988b-2590-4358-90c2-5f7960265592
                          versionNumber: 1
                  validationOptions:
                    levels:
                      - ERROR
                      - WARNING
                schema:
                  $ref: '#/components/schemas/WorkflowUpdateValidateRequestBean'
          responses:
            '401':
              description: >-
                Returned if the authentication credentials are incorrect or missing,
                or the caller doesn't have permissions to perform the operation.
