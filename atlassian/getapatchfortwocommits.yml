apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Get A Patch For Two Commits
  description: >-
    Produces a raw patch for a single commit (diffed against its firstparent),
    or a patch-series for a revspec of 2 commits (e.g.`3a8b42..9ff173` where the
    first commit represents the source and thesecond commit the destination).In
    case of the latter (diffing a revspec), a patch series is returnedfor the
    commits on the source branch (`3a8b42` and its ancestors inour
    example).While similar to diffs, patches:* Have a commit header (username,
    commit message, etc)* Do not support the `path=foo/bar.py` query
    parameterThe raw patch is returned as-is, in whatever encoding the files in
    therepository use. It is not decoded into unicode. As such, thecontent-type
    is `text/plain`.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Get A Patch For Two Commits
      description: >-
        Produces a raw patch for a single commit (diffed against its firstparent),
        or a patch-series for a revspec of 2 commits (e.g.`3a8b42..9ff173` where the
        first commit represents the source and thesecond commit the destination).In
        case of the latter (diffing a revspec), a patch series is returnedfor the
        commits on the source branch (`3a8b42` and its ancestors inour
        example).While similar to diffs, patches:* Have a commit header (username,
        commit message, etc)* Do not support the `path=foo/bar.py` query
        parameterThe raw patch is returned as-is, in whatever encoding the files in
        therepository use. It is not decoded into unicode. As such, thecontent-type
        is `text/plain`.
    paths:
      /repositories/{workspace}/{repo_slug}/patch/{spec}:
        get:
          summary: Get A Patch For Two Commits
          description: >-
            Produces a raw patch for a single commit (diffed against its
            firstparent), or a patch-series for a revspec of 2 commits
            (e.g.`3a8b42..9ff173` where the first commit represents the source and
            thesecond commit the destination).In case of the latter (diffing a
            revspec), a patch series is returnedfor the commits on the source branch
            (`3a8b42` and its ancestors inour example).While similar to diffs,
            patches:* Have a commit header (username, commit message, etc)* Do not
            support the `path=foo/bar.py` query parameterThe raw patch is returned
            as-is, in whatever encoding the files in therepository use. It is not
            decoded into unicode. As such, thecontent-type is `text/plain`.
          operationId: getapatchfortwocommits
          responses:
            '555':
              description: |-
                If the diff was too large and timed out.

                Since this endpoint does not employ any form of pagination, but
                instead returns the diff as a single document, it can run into
                trouble on very large diffs. If Bitbucket times out in cases
                like these, a 555 status code is returned.
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/error'
