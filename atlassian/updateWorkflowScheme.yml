apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Classic Update Workflow Scheme
  description: >-
    Updates a company-manged project workflow scheme, including the name,
    default workflow, issue type to project mappings, and more. If the workflow
    scheme is active (that is, being used by at least one project), then a draft
    workflow scheme is created or updated instead, provided that
    `updateDraftIfNeeded` is set to `true`.**[Permissions](#permissions)
    required:** *Administer Jira* [global
    permission](https://confluence.atlassian.com/x/x4dKLg).
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Classic Update Workflow Scheme
      description: >-
        Updates a company-manged project workflow scheme, including the name,
        default workflow, issue type to project mappings, and more. If the workflow
        scheme is active (that is, being used by at least one project), then a draft
        workflow scheme is created or updated instead, provided that
        `updateDraftIfNeeded` is set to `true`.**[Permissions](#permissions)
        required:** *Administer Jira* [global
        permission](https://confluence.atlassian.com/x/x4dKLg).
    paths:
      /rest/api/3/workflowscheme/{id}:
        put:
          summary: Classic Update Workflow Scheme
          description: >-
            Updates a company-manged project workflow scheme, including the name,
            default workflow, issue type to project mappings, and more. If the
            workflow scheme is active (that is, being used by at least one project),
            then a draft workflow scheme is created or updated instead, provided
            that `updateDraftIfNeeded` is set to
            `true`.**[Permissions](#permissions) required:** *Administer Jira*
            [global permission](https://confluence.atlassian.com/x/x4dKLg).
          operationId: updateWorkflowScheme
          requestBody:
            required: true
            content:
              application/json:
                example:
                  defaultWorkflow: jira
                  description: The description of the example workflow scheme.
                  issueTypeMappings:
                    '10000': scrum workflow
                  name: Example workflow scheme
                  updateDraftIfNeeded: false
                schema:
                  $ref: '#/components/schemas/WorkflowScheme'
          responses:
            '404':
              description: Returned if the workflow scheme is not found.
