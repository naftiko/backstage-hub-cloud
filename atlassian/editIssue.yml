apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Edit Issue
  description: >-
    Edits an issue. A transition may be applied and issue properties updated as
    part of the edit.The edits to the issue's fields are defined using `update`
    and `fields`. The fields that can be edited are determined using [ Get edit
    issue metadata](#api-rest-api-3-issue-issueIdOrKey-editmeta-get).The parent
    field may be set by key or ID. For standard issue types, the parent may be
    removed by setting `update.parent.set.none` to *true*. Note that the
    `description`, `environment`, and any `textarea` type custom fields
    (multi-line text fields) take Atlassian Document Format content. Single line
    custom fields (`textfield`) accept a string and don't handle Atlassian
    Document Format content.Connect apps having an app user with *Administer
    Jira* [global permission](https://confluence.atlassian.com/x/x4dKLg), and
    Forge apps acting on behalf of users with *Administer Jira* [global
    permission](https://confluence.atlassian.com/x/x4dKLg), can override the
    screen security configuration using `overrideScreenSecurity` and
    `overrideEditableFlag`.This operation can be accessed
    anonymously.**[Permissions](#permissions) required:** *  *Browse projects*
    and *Edit issues* [project
    permission](https://confluence.atlassian.com/x/yodKLg) for the project that
    the issue is in. *  If [issue-level
    security](https://confluence.atlassian.com/x/J4lKLg) is configured,
    issue-level security permission to view the issue.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Edit Issue
      description: >-
        Edits an issue. A transition may be applied and issue properties updated as
        part of the edit.The edits to the issue's fields are defined using `update`
        and `fields`. The fields that can be edited are determined using [ Get edit
        issue metadata](#api-rest-api-3-issue-issueIdOrKey-editmeta-get).The parent
        field may be set by key or ID. For standard issue types, the parent may be
        removed by setting `update.parent.set.none` to *true*. Note that the
        `description`, `environment`, and any `textarea` type custom fields
        (multi-line text fields) take Atlassian Document Format content. Single line
        custom fields (`textfield`) accept a string and don't handle Atlassian
        Document Format content.Connect apps having an app user with *Administer
        Jira* [global permission](https://confluence.atlassian.com/x/x4dKLg), and
        Forge apps acting on behalf of users with *Administer Jira* [global
        permission](https://confluence.atlassian.com/x/x4dKLg), can override the
        screen security configuration using `overrideScreenSecurity` and
        `overrideEditableFlag`.This operation can be accessed
        anonymously.**[Permissions](#permissions) required:** *  *Browse projects*
        and *Edit issues* [project
        permission](https://confluence.atlassian.com/x/yodKLg) for the project that
        the issue is in. *  If [issue-level
        security](https://confluence.atlassian.com/x/J4lKLg) is configured,
        issue-level security permission to view the issue.
    paths:
      /rest/api/3/issue/{issueIdOrKey}:
        put:
          summary: Edit Issue
          description: >-
            Edits an issue. A transition may be applied and issue properties updated
            as part of the edit.The edits to the issue's fields are defined using
            `update` and `fields`. The fields that can be edited are determined
            using [ Get edit issue
            metadata](#api-rest-api-3-issue-issueIdOrKey-editmeta-get).The parent
            field may be set by key or ID. For standard issue types, the parent may
            be removed by setting `update.parent.set.none` to *true*. Note that the
            `description`, `environment`, and any `textarea` type custom fields
            (multi-line text fields) take Atlassian Document Format content. Single
            line custom fields (`textfield`) accept a string and don't handle
            Atlassian Document Format content.Connect apps having an app user with
            *Administer Jira* [global
            permission](https://confluence.atlassian.com/x/x4dKLg), and Forge apps
            acting on behalf of users with *Administer Jira* [global
            permission](https://confluence.atlassian.com/x/x4dKLg), can override the
            screen security configuration using `overrideScreenSecurity` and
            `overrideEditableFlag`.This operation can be accessed
            anonymously.**[Permissions](#permissions) required:** *  *Browse
            projects* and *Edit issues* [project
            permission](https://confluence.atlassian.com/x/yodKLg) for the project
            that the issue is in. *  If [issue-level
            security](https://confluence.atlassian.com/x/J4lKLg) is configured,
            issue-level security permission to view the issue.
          operationId: editIssue
          requestBody:
            required: true
            content:
              application/json:
                example:
                  fields:
                    customfield_10000:
                      content:
                        - content:
                            - text: Investigation underway
                              type: text
                          type: paragraph
                      type: doc
                      version: 1
                    customfield_10010: 1
                    summary: Completed orders still displaying in pending
                  historyMetadata:
                    activityDescription: Complete order processing
                    actor:
                      avatarUrl: http://mysystem/avatar/tony.jpg
                      displayName: Tony
                      id: tony
                      type: mysystem-user
                      url: http://mysystem/users/tony
                    cause:
                      id: myevent
                      type: mysystem-event
                    description: From the order testing process
                    extraData:
                      Iteration: 10a
                      Step: '4'
                    generator:
                      id: mysystem-1
                      type: mysystem-application
                    type: myplugin:type
                  properties:
                    - key: key1
                      value: Order number 10784
                    - key: key2
                      value: Order number 10923
                  update:
                    components:
                      - set: ''
                    labels:
                      - add: triaged
                      - remove: blocker
                    summary:
                      - set: Bug in business logic
                    timetracking:
                      - edit:
                          originalEstimate: 1w 1d
                          remainingEstimate: 4d
                schema:
                  $ref: '#/components/schemas/IssueUpdateDetails'
          responses:
            '422':
              description: >-
                Returned if a configuration problem prevents the issue being
                updated. (refer to the
                [changelog](https://developer.atlassian.com/changelog/#CHANGE-1364)
                *for more details.*
