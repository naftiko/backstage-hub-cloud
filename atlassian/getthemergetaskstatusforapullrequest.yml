apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Get The Merge Task Status For A Pull Request
  description: >-
    When merging a pull request takes too long, the client receives atask ID
    along with a 202 status code. The task ID can be used in a callto this
    endpoint to check the status of a merge task.```curl -X GET
    https://api.bitbucket.org/2.0/repositories/atlassian/bitbucket/pullrequests/2286/merge/task-status/```If
    the merge task is not yet finished, a PENDING status will be
    returned.```HTTP/2 200{    "task_status": "PENDING",    "links": {       
    "self": {            "href":
    "https://api.bitbucket.org/2.0/repositories/atlassian/bitbucket/pullrequests/2286/merge/task-status/"       
    }    }}```If the merge was successful, a SUCCESS status will be
    returned.```HTTP/2 200{    "task_status": "SUCCESS",    "links": {       
    "self": {            "href":
    "https://api.bitbucket.org/2.0/repositories/atlassian/bitbucket/pullrequests/2286/merge/task-status/"       
    }    },    "merge_result": }```If the merge task failed, an error will be
    returned.```{    "type": "error",    "error": {        "message": ""   
    }}```
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Get The Merge Task Status For A Pull Request
      description: >-
        When merging a pull request takes too long, the client receives atask ID
        along with a 202 status code. The task ID can be used in a callto this
        endpoint to check the status of a merge task.```curl -X GET
        https://api.bitbucket.org/2.0/repositories/atlassian/bitbucket/pullrequests/2286/merge/task-status/```If
        the merge task is not yet finished, a PENDING status will be
        returned.```HTTP/2 200{    "task_status": "PENDING",    "links": {       
        "self": {            "href":
        "https://api.bitbucket.org/2.0/repositories/atlassian/bitbucket/pullrequests/2286/merge/task-status/"       
        }    }}```If the merge was successful, a SUCCESS status will be
        returned.```HTTP/2 200{    "task_status": "SUCCESS",    "links": {       
        "self": {            "href":
        "https://api.bitbucket.org/2.0/repositories/atlassian/bitbucket/pullrequests/2286/merge/task-status/"       
        }    },    "merge_result": }```If the merge task failed, an error will be
        returned.```{    "type": "error",    "error": {        "message": ""   
        }}```
    paths:
      /repositories/{workspace}/{repo_slug}/pullrequests/{pull_request_id}/merge/task-status/{task_id}:
        get:
          summary: Get The Merge Task Status For A Pull Request
          description: >-
            When merging a pull request takes too long, the client receives atask ID
            along with a 202 status code. The task ID can be used in a callto this
            endpoint to check the status of a merge task.```curl -X GET
            https://api.bitbucket.org/2.0/repositories/atlassian/bitbucket/pullrequests/2286/merge/task-status/```If
            the merge task is not yet finished, a PENDING status will be
            returned.```HTTP/2 200{    "task_status": "PENDING",    "links":
            {        "self": {            "href":
            "https://api.bitbucket.org/2.0/repositories/atlassian/bitbucket/pullrequests/2286/merge/task-status/"       
            }    }}```If the merge was successful, a SUCCESS status will be
            returned.```HTTP/2 200{    "task_status": "SUCCESS",    "links":
            {        "self": {            "href":
            "https://api.bitbucket.org/2.0/repositories/atlassian/bitbucket/pullrequests/2286/merge/task-status/"       
            }    },    "merge_result": }```If the merge task failed, an error will
            be returned.```{    "type": "error",    "error": {        "message":
            ""    }}```
          operationId: getthemergetaskstatusforapullrequest
          responses:
            '403':
              description: >-
                The user making the request does not have permission to the repo and
                is different from the user who queued the task
