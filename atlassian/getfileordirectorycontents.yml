apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Get File Or Directory Contents
  description: >-
    This endpoints is used to retrieve the contents of a single file,or the
    contents of a directory at a specified revision.#### Raw file contentsWhen
    `path` points to a file, this endpoint returns the raw contents.The
    response's Content-Type is derived from the filenameextension (not from the
    contents). The file contents are not processedand no character
    encoding/recoding is performed and as a result nocharacter encoding is
    included as part of the Content-Type.The `Content-Disposition` header will
    be "attachment" to preventbrowsers from running executable files.If the file
    is managed by LFS, then a 301 redirect pointing toAtlassian's media services
    platform is returned.The response includes an ETag that is based on the
    contents of the fileand its attributes. This means that an empty
    `__init__.py` alwaysreturns the same ETag, regardless on the directory it
    lives in, or thecommit it is on.#### File meta dataWhen the request for a
    file path includes the query parameter`?format=meta`, instead of returning
    the file's raw contents, Bitbucketinstead returns the JSON object describing
    the file's properties:```javascript$ curl
    https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef/tests/__init__.py?format=meta{ 
    "links": {    "self": {      "href":
    "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/__init__.py"   
    },    "meta": {      "href":
    "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/__init__.py?format=meta"   
    }  },  "path": "tests/__init__.py",  "commit": {    "type": "commit",   
    "hash": "eefd5ef5d3df01aed629f650959d6706d54cd335",    "links": {     
    "self": {        "href":
    "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/commit/eefd5ef5d3df01aed629f650959d6706d54cd335"     
    },      "html": {        "href":
    "https://bitbucket.org/atlassian/bbql/commits/eefd5ef5d3df01aed629f650959d6706d54cd335"     
    }    }  },  "attributes": [],  "type": "commit_file",  "size": 0}```File
    objects contain an `attributes` element that contains a list ofpossible
    modifiers. Currently defined values are:* `link` -- indicates that the entry
    is a symbolic link. The contents    of the file represent the path the link
    points to.* `executable` -- indicates that the file has the executable bit
    set.* `subrepository` -- indicates that the entry points to a submodule
    or    subrepo. The contents of the file is the SHA1 of the repository   
    pointed to.* `binary` -- indicates whether Bitbucket thinks the file is
    binary.This endpoint can provide an alternative to how a HEAD request can
    beused to check for the existence of a file, or a file's size
    withoutincurring the overhead of receiving its full contents.#### Directory
    listingsWhen `path` points to a directory instead of a file, the response is
    apaginated list of directory and file objects in the same order as
    theunderlying SCM system would return them.For example:```javascript$ curl
    https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef/tests{ 
    "pagelen": 10,  "values": [    {      "path": "tests/test_project",     
    "type": "commit_directory",      "links": {        "self": {         
    "href":
    "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/test_project/"       
    },        "meta": {          "href":
    "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/test_project/?format=meta"       
    }      },      "commit": {        "type": "commit",        "hash":
    "eefd5ef5d3df01aed629f650959d6706d54cd335",        "links": {         
    "self": {            "href":
    "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/commit/eefd5ef5d3df01aed629f650959d6706d54cd335"         
    },          "html": {            "href":
    "https://bitbucket.org/atlassian/bbql/commits/eefd5ef5d3df01aed629f650959d6706d54cd335"         
    }        }      }    },    {      "links": {        "self": {         
    "href":
    "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/__init__.py"       
    },        "meta": {          "href":
    "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/__init__.py?format=meta"       
    }      },      "path": "tests/__init__.py",      "commit": {        "type":
    "commit",        "hash": "eefd5ef5d3df01aed629f650959d6706d54cd335",       
    "links": {          "self": {            "href":
    "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/commit/eefd5ef5d3df01aed629f650959d6706d54cd335"         
    },          "html": {            "href":
    "https://bitbucket.org/atlassian/bbql/commits/eefd5ef5d3df01aed629f650959d6706d54cd335"         
    }        }      },      "attributes": [],      "type": "commit_file",     
    "size": 0    }  ],  "page": 1,  "size": 2}```When listing the contents of
    the repo's root directory, the use of atrailing slash at the end of the URL
    is required.The response by default is not recursive, meaning that only the
    direct contents ofa path are returned. The response does not recurse down
    intosubdirectories. In order to "walk" the entire directory tree, theclient
    can either parse each response and follow the `self` links of
    each`commit_directory` object, or can specify a `max_depth` to recurse
    to.The max_depth parameter will do a breadth-first search to return the
    contents of the subdirectoriesup to the depth specified. Breadth-first
    search was chosen as it leads to the least amount offile system operations
    for git. If the `max_depth` parameter is specified to be toolarge, the call
    will time out and return a 555.Each returned object is either a
    `commit_file`, or a `commit_directory`,both of which contain a `path`
    element. This path is the absolute pathfrom the root of the repository. Each
    object also contains a `commit`object which embeds the commit the file is
    on. Note that this is merelythe commit that was used in the URL. It is *not*
    the commit that lastmodified the file.Directory objects have 2
    representations. Their `self` link returns thepaginated contents of the
    directory. The `meta` link on the other handreturns the actual `directory`
    object itself, e.g.:```javascript{  "path": "tests/test_project",  "type":
    "commit_directory",  "links": {    "self": {      "href":
    "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/test_project/"   
    },    "meta": {      "href":
    "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/test_project/?format=meta"   
    }  },  "commit": { ... }}```#### Querying, filtering and sortingLike most
    API endpoints, this API supports the Bitbucketquerying/filtering syntax and
    so you could filter a directory listingto only include entries that match
    certain criteria. For instance, tolist all binary files over 1kb use the
    expression:`size > 1024 and attributes = "binary"`which after urlencoding
    yields the query string:`?q=size%3E1024+and+attributes%3D%22binary%22`To
    change the ordering of the response, use the `?sort`
    parameter:`.../src/eefd5ef/?sort=-size`See [filtering and
    sorting](/cloud/bitbucket/rest/intro/#filtering) for moredetails.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Get File Or Directory Contents
      description: >-
        This endpoints is used to retrieve the contents of a single file,or the
        contents of a directory at a specified revision.#### Raw file contentsWhen
        `path` points to a file, this endpoint returns the raw contents.The
        response's Content-Type is derived from the filenameextension (not from the
        contents). The file contents are not processedand no character
        encoding/recoding is performed and as a result nocharacter encoding is
        included as part of the Content-Type.The `Content-Disposition` header will
        be "attachment" to preventbrowsers from running executable files.If the file
        is managed by LFS, then a 301 redirect pointing toAtlassian's media services
        platform is returned.The response includes an ETag that is based on the
        contents of the fileand its attributes. This means that an empty
        `__init__.py` alwaysreturns the same ETag, regardless on the directory it
        lives in, or thecommit it is on.#### File meta dataWhen the request for a
        file path includes the query parameter`?format=meta`, instead of returning
        the file's raw contents, Bitbucketinstead returns the JSON object describing
        the file's properties:```javascript$ curl
        https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef/tests/__init__.py?format=meta{ 
        "links": {    "self": {      "href":
        "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/__init__.py"   
        },    "meta": {      "href":
        "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/__init__.py?format=meta"   
        }  },  "path": "tests/__init__.py",  "commit": {    "type": "commit",   
        "hash": "eefd5ef5d3df01aed629f650959d6706d54cd335",    "links": {     
        "self": {        "href":
        "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/commit/eefd5ef5d3df01aed629f650959d6706d54cd335"     
        },      "html": {        "href":
        "https://bitbucket.org/atlassian/bbql/commits/eefd5ef5d3df01aed629f650959d6706d54cd335"     
        }    }  },  "attributes": [],  "type": "commit_file",  "size": 0}```File
        objects contain an `attributes` element that contains a list ofpossible
        modifiers. Currently defined values are:* `link` -- indicates that the entry
        is a symbolic link. The contents    of the file represent the path the link
        points to.* `executable` -- indicates that the file has the executable bit
        set.* `subrepository` -- indicates that the entry points to a submodule
        or    subrepo. The contents of the file is the SHA1 of the repository   
        pointed to.* `binary` -- indicates whether Bitbucket thinks the file is
        binary.This endpoint can provide an alternative to how a HEAD request can
        beused to check for the existence of a file, or a file's size
        withoutincurring the overhead of receiving its full contents.#### Directory
        listingsWhen `path` points to a directory instead of a file, the response is
        apaginated list of directory and file objects in the same order as
        theunderlying SCM system would return them.For example:```javascript$ curl
        https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef/tests{ 
        "pagelen": 10,  "values": [    {      "path": "tests/test_project",     
        "type": "commit_directory",      "links": {        "self": {         
        "href":
        "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/test_project/"       
        },        "meta": {          "href":
        "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/test_project/?format=meta"       
        }      },      "commit": {        "type": "commit",        "hash":
        "eefd5ef5d3df01aed629f650959d6706d54cd335",        "links": {         
        "self": {            "href":
        "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/commit/eefd5ef5d3df01aed629f650959d6706d54cd335"         
        },          "html": {            "href":
        "https://bitbucket.org/atlassian/bbql/commits/eefd5ef5d3df01aed629f650959d6706d54cd335"         
        }        }      }    },    {      "links": {        "self": {         
        "href":
        "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/__init__.py"       
        },        "meta": {          "href":
        "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/__init__.py?format=meta"       
        }      },      "path": "tests/__init__.py",      "commit": {        "type":
        "commit",        "hash": "eefd5ef5d3df01aed629f650959d6706d54cd335",       
        "links": {          "self": {            "href":
        "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/commit/eefd5ef5d3df01aed629f650959d6706d54cd335"         
        },          "html": {            "href":
        "https://bitbucket.org/atlassian/bbql/commits/eefd5ef5d3df01aed629f650959d6706d54cd335"         
        }        }      },      "attributes": [],      "type": "commit_file",     
        "size": 0    }  ],  "page": 1,  "size": 2}```When listing the contents of
        the repo's root directory, the use of atrailing slash at the end of the URL
        is required.The response by default is not recursive, meaning that only the
        direct contents ofa path are returned. The response does not recurse down
        intosubdirectories. In order to "walk" the entire directory tree, theclient
        can either parse each response and follow the `self` links of
        each`commit_directory` object, or can specify a `max_depth` to recurse
        to.The max_depth parameter will do a breadth-first search to return the
        contents of the subdirectoriesup to the depth specified. Breadth-first
        search was chosen as it leads to the least amount offile system operations
        for git. If the `max_depth` parameter is specified to be toolarge, the call
        will time out and return a 555.Each returned object is either a
        `commit_file`, or a `commit_directory`,both of which contain a `path`
        element. This path is the absolute pathfrom the root of the repository. Each
        object also contains a `commit`object which embeds the commit the file is
        on. Note that this is merelythe commit that was used in the URL. It is *not*
        the commit that lastmodified the file.Directory objects have 2
        representations. Their `self` link returns thepaginated contents of the
        directory. The `meta` link on the other handreturns the actual `directory`
        object itself, e.g.:```javascript{  "path": "tests/test_project",  "type":
        "commit_directory",  "links": {    "self": {      "href":
        "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/test_project/"   
        },    "meta": {      "href":
        "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/test_project/?format=meta"   
        }  },  "commit": { ... }}```#### Querying, filtering and sortingLike most
        API endpoints, this API supports the Bitbucketquerying/filtering syntax and
        so you could filter a directory listingto only include entries that match
        certain criteria. For instance, tolist all binary files over 1kb use the
        expression:`size > 1024 and attributes = "binary"`which after urlencoding
        yields the query string:`?q=size%3E1024+and+attributes%3D%22binary%22`To
        change the ordering of the response, use the `?sort`
        parameter:`.../src/eefd5ef/?sort=-size`See [filtering and
        sorting](/cloud/bitbucket/rest/intro/#filtering) for moredetails.
    paths:
      /repositories/{workspace}/{repo_slug}/src/{commit}/{path}:
        get:
          summary: Get File Or Directory Contents
          description: >-
            This endpoints is used to retrieve the contents of a single file,or the
            contents of a directory at a specified revision.#### Raw file
            contentsWhen `path` points to a file, this endpoint returns the raw
            contents.The response's Content-Type is derived from the
            filenameextension (not from the contents). The file contents are not
            processedand no character encoding/recoding is performed and as a result
            nocharacter encoding is included as part of the Content-Type.The
            `Content-Disposition` header will be "attachment" to preventbrowsers
            from running executable files.If the file is managed by LFS, then a 301
            redirect pointing toAtlassian's media services platform is returned.The
            response includes an ETag that is based on the contents of the fileand
            its attributes. This means that an empty `__init__.py` alwaysreturns the
            same ETag, regardless on the directory it lives in, or thecommit it is
            on.#### File meta dataWhen the request for a file path includes the
            query parameter`?format=meta`, instead of returning the file's raw
            contents, Bitbucketinstead returns the JSON object describing the file's
            properties:```javascript$ curl
            https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef/tests/__init__.py?format=meta{ 
            "links": {    "self": {      "href":
            "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/__init__.py"   
            },    "meta": {      "href":
            "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/__init__.py?format=meta"   
            }  },  "path": "tests/__init__.py",  "commit": {    "type": "commit",   
            "hash": "eefd5ef5d3df01aed629f650959d6706d54cd335",    "links": {     
            "self": {        "href":
            "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/commit/eefd5ef5d3df01aed629f650959d6706d54cd335"     
            },      "html": {        "href":
            "https://bitbucket.org/atlassian/bbql/commits/eefd5ef5d3df01aed629f650959d6706d54cd335"     
            }    }  },  "attributes": [],  "type": "commit_file",  "size": 0}```File
            objects contain an `attributes` element that contains a list ofpossible
            modifiers. Currently defined values are:* `link` -- indicates that the
            entry is a symbolic link. The contents    of the file represent the path
            the link points to.* `executable` -- indicates that the file has the
            executable bit set.* `subrepository` -- indicates that the entry points
            to a submodule or    subrepo. The contents of the file is the SHA1 of
            the repository    pointed to.* `binary` -- indicates whether Bitbucket
            thinks the file is binary.This endpoint can provide an alternative to
            how a HEAD request can beused to check for the existence of a file, or a
            file's size withoutincurring the overhead of receiving its full
            contents.#### Directory listingsWhen `path` points to a directory
            instead of a file, the response is apaginated list of directory and file
            objects in the same order as theunderlying SCM system would return
            them.For example:```javascript$ curl
            https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef/tests{ 
            "pagelen": 10,  "values": [    {      "path": "tests/test_project",     
            "type": "commit_directory",      "links": {        "self": {         
            "href":
            "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/test_project/"       
            },        "meta": {          "href":
            "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/test_project/?format=meta"       
            }      },      "commit": {        "type": "commit",        "hash":
            "eefd5ef5d3df01aed629f650959d6706d54cd335",        "links": {         
            "self": {            "href":
            "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/commit/eefd5ef5d3df01aed629f650959d6706d54cd335"         
            },          "html": {            "href":
            "https://bitbucket.org/atlassian/bbql/commits/eefd5ef5d3df01aed629f650959d6706d54cd335"         
            }        }      }    },    {      "links": {        "self": {         
            "href":
            "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/__init__.py"       
            },        "meta": {          "href":
            "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/__init__.py?format=meta"       
            }      },      "path": "tests/__init__.py",      "commit": {       
            "type": "commit",        "hash":
            "eefd5ef5d3df01aed629f650959d6706d54cd335",        "links": {         
            "self": {            "href":
            "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/commit/eefd5ef5d3df01aed629f650959d6706d54cd335"         
            },          "html": {            "href":
            "https://bitbucket.org/atlassian/bbql/commits/eefd5ef5d3df01aed629f650959d6706d54cd335"         
            }        }      },      "attributes": [],      "type":
            "commit_file",      "size": 0    }  ],  "page": 1,  "size": 2}```When
            listing the contents of the repo's root directory, the use of atrailing
            slash at the end of the URL is required.The response by default is not
            recursive, meaning that only the direct contents ofa path are returned.
            The response does not recurse down intosubdirectories. In order to
            "walk" the entire directory tree, theclient can either parse each
            response and follow the `self` links of each`commit_directory` object,
            or can specify a `max_depth` to recurse to.The max_depth parameter will
            do a breadth-first search to return the contents of the subdirectoriesup
            to the depth specified. Breadth-first search was chosen as it leads to
            the least amount offile system operations for git. If the `max_depth`
            parameter is specified to be toolarge, the call will time out and return
            a 555.Each returned object is either a `commit_file`, or a
            `commit_directory`,both of which contain a `path` element. This path is
            the absolute pathfrom the root of the repository. Each object also
            contains a `commit`object which embeds the commit the file is on. Note
            that this is merelythe commit that was used in the URL. It is *not* the
            commit that lastmodified the file.Directory objects have 2
            representations. Their `self` link returns thepaginated contents of the
            directory. The `meta` link on the other handreturns the actual
            `directory` object itself, e.g.:```javascript{  "path":
            "tests/test_project",  "type": "commit_directory",  "links": {   
            "self": {      "href":
            "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/test_project/"   
            },    "meta": {      "href":
            "https://api.bitbucket.org/2.0/repositories/atlassian/bbql/src/eefd5ef5d3df01aed629f650959d6706d54cd335/tests/test_project/?format=meta"   
            }  },  "commit": { ... }}```#### Querying, filtering and sortingLike
            most API endpoints, this API supports the Bitbucketquerying/filtering
            syntax and so you could filter a directory listingto only include
            entries that match certain criteria. For instance, tolist all binary
            files over 1kb use the expression:`size > 1024 and attributes =
            "binary"`which after urlencoding yields the query
            string:`?q=size%3E1024+and+attributes%3D%22binary%22`To change the
            ordering of the response, use the `?sort`
            parameter:`.../src/eefd5ef/?sort=-size`See [filtering and
            sorting](/cloud/bitbucket/rest/intro/#filtering) for moredetails.
          operationId: getfileordirectorycontents
          responses:
            '555':
              description: >-
                If the call times out, possibly because the specified recursion
                depth is too large.
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/error'
