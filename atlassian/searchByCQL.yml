apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Search Content
  description: >-
    Searches for content using the[Confluence Query Language
    (CQL)](https://developer.atlassian.com/cloud/confluence/advanced-searching-using-cql/).**Note
    that CQL input queries submitted through the `/wiki/rest/api/search`
    endpoint no longer support user-specific fields like `user`,
    `user.fullname`, `user.accountid`, and `user.userkey`.** See this
    [deprecation
    notice](https://developer.atlassian.com/cloud/confluence/deprecation-notice-search-api/)
    for more details.Example initial
    call:```/wiki/rest/api/search?cql=type=page&limit=25```Example
    response:```{  "results": [    { ... },    { ... },    ...    { ... }  ], 
    "limit": 25,  "size": 25,  ...  "_links": {    "base": "",    "context":
    "",    "next":
    "/rest/api/search?cql=type=page&limit=25&cursor=raNDoMsTRiNg",    "self":
    ""  }}```When additional results are available, returns `next` and `prev`
    URLs to retrieve them in subsequent calls. The URLs each contain a cursor
    that points to the appropriate set of results. Use `limit` to specify the
    number of results returned in each call.Example subsequent call (taken from
    example
    response):```/wiki/rest/api/search?cql=type=page&limit=25&cursor=raNDoMsTRiNg```The
    response to this will have a `prev` URL similar to the `next` in the example
    response.**[Permissions](https://confluence.atlassian.com/x/_AozKw)
    required**:Permission to view the entities. Note, only entities that the
    user haspermission to view will be returned.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Search Content
      description: >-
        Searches for content using the[Confluence Query Language
        (CQL)](https://developer.atlassian.com/cloud/confluence/advanced-searching-using-cql/).**Note
        that CQL input queries submitted through the `/wiki/rest/api/search`
        endpoint no longer support user-specific fields like `user`,
        `user.fullname`, `user.accountid`, and `user.userkey`.** See this
        [deprecation
        notice](https://developer.atlassian.com/cloud/confluence/deprecation-notice-search-api/)
        for more details.Example initial
        call:```/wiki/rest/api/search?cql=type=page&limit=25```Example
        response:```{  "results": [    { ... },    { ... },    ...    { ... }  ], 
        "limit": 25,  "size": 25,  ...  "_links": {    "base": "",    "context":
        "",    "next":
        "/rest/api/search?cql=type=page&limit=25&cursor=raNDoMsTRiNg",    "self":
        ""  }}```When additional results are available, returns `next` and `prev`
        URLs to retrieve them in subsequent calls. The URLs each contain a cursor
        that points to the appropriate set of results. Use `limit` to specify the
        number of results returned in each call.Example subsequent call (taken from
        example
        response):```/wiki/rest/api/search?cql=type=page&limit=25&cursor=raNDoMsTRiNg```The
        response to this will have a `prev` URL similar to the `next` in the example
        response.**[Permissions](https://confluence.atlassian.com/x/_AozKw)
        required**:Permission to view the entities. Note, only entities that the
        user haspermission to view will be returned.
    paths:
      /wiki/rest/api/search:
        get:
          summary: Search Content
          description: >-
            Searches for content using the[Confluence Query Language
            (CQL)](https://developer.atlassian.com/cloud/confluence/advanced-searching-using-cql/).**Note
            that CQL input queries submitted through the `/wiki/rest/api/search`
            endpoint no longer support user-specific fields like `user`,
            `user.fullname`, `user.accountid`, and `user.userkey`.** See this
            [deprecation
            notice](https://developer.atlassian.com/cloud/confluence/deprecation-notice-search-api/)
            for more details.Example initial
            call:```/wiki/rest/api/search?cql=type=page&limit=25```Example
            response:```{  "results": [    { ... },    { ... },    ...    { ... } 
            ],  "limit": 25,  "size": 25,  ...  "_links": {    "base": "",   
            "context": "",    "next":
            "/rest/api/search?cql=type=page&limit=25&cursor=raNDoMsTRiNg",   
            "self": ""  }}```When additional results are available, returns `next`
            and `prev` URLs to retrieve them in subsequent calls. The URLs each
            contain a cursor that points to the appropriate set of results. Use
            `limit` to specify the number of results returned in each call.Example
            subsequent call (taken from example
            response):```/wiki/rest/api/search?cql=type=page&limit=25&cursor=raNDoMsTRiNg```The
            response to this will have a `prev` URL similar to the `next` in the
            example
            response.**[Permissions](https://confluence.atlassian.com/x/_AozKw)
            required**:Permission to view the entities. Note, only entities that the
            user haspermission to view will be returned.
          operationId: searchByCQL
          responses:
            '403':
              description: |-
                Returned if the calling user does not have permission to access
                Confluence.
              content: {}
