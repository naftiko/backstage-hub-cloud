apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Create A Build Status For A Commit
  description: >-
    Creates a new build status against the specified commit.If the specified key
    already exists, the existing status object willbe
    overwritten.Example:```curl
    https://api.bitbucket.org/2.0/repositories/my-workspace/my-repo/commit/e10dae226959c2194f2b07b077c07762d93821cf/statuses/build/          
    -X POST -u jdoe -H 'Content-Type: application/json'           -d '{   
    "key": "MY-BUILD",    "state": "SUCCESSFUL",    "description": "42 tests
    passed",    "url": "https://www.example.org/my-build-result"  }'```When
    creating a new commit status, you can use a URI template for the
    URL.Templates are URLs that contain variable names that Bitbucket
    willevaluate at runtime whenever the URL is displayed anywhere similar
    toparameter substitution in[Bitbucket
    Connect](https://developer.atlassian.com/bitbucket/concepts/context-parameters.html).For
    example, one could use `https://foo.com/builds/{repository.full_name}`which
    Bitbucket will turn into `https://foo.com/builds/foo/bar` at render time.The
    context variables available are `repository` and `commit`.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Create A Build Status For A Commit
      description: >-
        Creates a new build status against the specified commit.If the specified key
        already exists, the existing status object willbe
        overwritten.Example:```curl
        https://api.bitbucket.org/2.0/repositories/my-workspace/my-repo/commit/e10dae226959c2194f2b07b077c07762d93821cf/statuses/build/          
        -X POST -u jdoe -H 'Content-Type: application/json'           -d '{   
        "key": "MY-BUILD",    "state": "SUCCESSFUL",    "description": "42 tests
        passed",    "url": "https://www.example.org/my-build-result"  }'```When
        creating a new commit status, you can use a URI template for the
        URL.Templates are URLs that contain variable names that Bitbucket
        willevaluate at runtime whenever the URL is displayed anywhere similar
        toparameter substitution in[Bitbucket
        Connect](https://developer.atlassian.com/bitbucket/concepts/context-parameters.html).For
        example, one could use `https://foo.com/builds/{repository.full_name}`which
        Bitbucket will turn into `https://foo.com/builds/foo/bar` at render time.The
        context variables available are `repository` and `commit`.
    paths:
      /repositories/{workspace}/{repo_slug}/commit/{commit}/statuses/build:
        post:
          summary: Create A Build Status For A Commit
          description: >-
            Creates a new build status against the specified commit.If the specified
            key already exists, the existing status object willbe
            overwritten.Example:```curl
            https://api.bitbucket.org/2.0/repositories/my-workspace/my-repo/commit/e10dae226959c2194f2b07b077c07762d93821cf/statuses/build/          
            -X POST -u jdoe -H 'Content-Type: application/json'           -d '{   
            "key": "MY-BUILD",    "state": "SUCCESSFUL",    "description": "42 tests
            passed",    "url": "https://www.example.org/my-build-result"  }'```When
            creating a new commit status, you can use a URI template for the
            URL.Templates are URLs that contain variable names that Bitbucket
            willevaluate at runtime whenever the URL is displayed anywhere similar
            toparameter substitution in[Bitbucket
            Connect](https://developer.atlassian.com/bitbucket/concepts/context-parameters.html).For
            example, one could use
            `https://foo.com/builds/{repository.full_name}`which Bitbucket will turn
            into `https://foo.com/builds/foo/bar` at render time.The context
            variables available are `repository` and `commit`.
          operationId: createabuildstatusforacommit
          requestBody:
            description: The new commit status object.
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/commitstatus'
          responses:
            '404':
              description: If the repository, commit, or build status key does not exist
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/error'
