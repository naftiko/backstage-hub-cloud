apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Get Bulk Permissions
  description: >-
    Returns: *  for a list of global permissions, the global permissions granted
    to a user. *  for a list of project permissions and lists of projects and
    issues, for each project permission a list of the projects and issues a user
    can access or manipulate.If no account ID is provided, the operation returns
    details for the logged in user.Note that: *  Invalid project and issue IDs
    are ignored. *  A maximum of 1000 projects and 1000 issues can be checked.
    *  Null values in `globalPermissions`, `projectPermissions`,
    `projectPermissions.projects`, and `projectPermissions.issues` are ignored.
    *  Empty strings in `projectPermissions.permissions` are
    ignored.**Deprecation notice:** The required OAuth 2.0 scopes will be
    updated on June 15, 2024. *  **Classic**: `read:jira-work` *  **Granular**:
    `read:permission:jira`This operation can be accessed
    anonymously.**[Permissions](#permissions) required:** *Administer Jira*
    [global permission](https://confluence.atlassian.com/x/x4dKLg) to check the
    permissions for other users, otherwise none. However, Connect apps can make
    a call from the app server to the product to obtain permission details for
    any user, without admin permission. This Connect app ability doesn't apply
    to calls made using AP.request() in a browser.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Get Bulk Permissions
      description: >-
        Returns: *  for a list of global permissions, the global permissions granted
        to a user. *  for a list of project permissions and lists of projects and
        issues, for each project permission a list of the projects and issues a user
        can access or manipulate.If no account ID is provided, the operation returns
        details for the logged in user.Note that: *  Invalid project and issue IDs
        are ignored. *  A maximum of 1000 projects and 1000 issues can be checked.
        *  Null values in `globalPermissions`, `projectPermissions`,
        `projectPermissions.projects`, and `projectPermissions.issues` are ignored.
        *  Empty strings in `projectPermissions.permissions` are
        ignored.**Deprecation notice:** The required OAuth 2.0 scopes will be
        updated on June 15, 2024. *  **Classic**: `read:jira-work` *  **Granular**:
        `read:permission:jira`This operation can be accessed
        anonymously.**[Permissions](#permissions) required:** *Administer Jira*
        [global permission](https://confluence.atlassian.com/x/x4dKLg) to check the
        permissions for other users, otherwise none. However, Connect apps can make
        a call from the app server to the product to obtain permission details for
        any user, without admin permission. This Connect app ability doesn't apply
        to calls made using AP.request() in a browser.
    paths:
      /rest/api/3/permissions/check:
        post:
          summary: Get Bulk Permissions
          description: >-
            Returns: *  for a list of global permissions, the global permissions
            granted to a user. *  for a list of project permissions and lists of
            projects and issues, for each project permission a list of the projects
            and issues a user can access or manipulate.If no account ID is provided,
            the operation returns details for the logged in user.Note that: * 
            Invalid project and issue IDs are ignored. *  A maximum of 1000 projects
            and 1000 issues can be checked. *  Null values in `globalPermissions`,
            `projectPermissions`, `projectPermissions.projects`, and
            `projectPermissions.issues` are ignored. *  Empty strings in
            `projectPermissions.permissions` are ignored.**Deprecation notice:** The
            required OAuth 2.0 scopes will be updated on June 15, 2024. * 
            **Classic**: `read:jira-work` *  **Granular**:
            `read:permission:jira`This operation can be accessed
            anonymously.**[Permissions](#permissions) required:** *Administer Jira*
            [global permission](https://confluence.atlassian.com/x/x4dKLg) to check
            the permissions for other users, otherwise none. However, Connect apps
            can make a call from the app server to the product to obtain permission
            details for any user, without admin permission. This Connect app ability
            doesn't apply to calls made using AP.request() in a browser.
          operationId: getBulkPermissions
          requestBody:
            description: Details of the permissions to check.
            required: true
            content:
              application/json:
                example:
                  accountId: 5b10a2844c20165700ede21g
                  globalPermissions:
                    - ADMINISTER
                  projectPermissions:
                    - issues:
                        - 10010
                        - 10011
                        - 10012
                        - 10013
                        - 10014
                      permissions:
                        - EDIT_ISSUES
                      projects:
                        - 10001
                schema:
                  $ref: '#/components/schemas/BulkPermissionsRequestBean'
          responses:
            '403':
              content:
                application/json:
                  example: >-
                    {"errorMessages":["Only Jira administrators can perform this
                    operation."],"errors":{}}
                  schema:
                    $ref: '#/components/schemas/ErrorCollection'
              description: Returned if the user does not have the necessary permission.
