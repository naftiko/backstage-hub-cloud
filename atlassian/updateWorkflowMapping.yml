apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Set Issue Types For Workflow In Workflow Scheme
  description: >-
    Sets the issue types for a workflow in a workflow scheme. The workflow can
    also be set as the default workflow for the workflow scheme. Unmapped issues
    types are mapped to the default workflow.Note that active workflow schemes
    cannot be edited. If the workflow scheme is active, set
    `updateDraftIfNeeded` to `true` in the request body and a draft workflow
    scheme is created or updated with the new workflow-issue types mappings. The
    draft workflow scheme can be published in Jira.**[Permissions](#permissions)
    required:** *Administer Jira* [global
    permission](https://confluence.atlassian.com/x/x4dKLg).
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Set Issue Types For Workflow In Workflow Scheme
      description: >-
        Sets the issue types for a workflow in a workflow scheme. The workflow can
        also be set as the default workflow for the workflow scheme. Unmapped issues
        types are mapped to the default workflow.Note that active workflow schemes
        cannot be edited. If the workflow scheme is active, set
        `updateDraftIfNeeded` to `true` in the request body and a draft workflow
        scheme is created or updated with the new workflow-issue types mappings. The
        draft workflow scheme can be published in Jira.**[Permissions](#permissions)
        required:** *Administer Jira* [global
        permission](https://confluence.atlassian.com/x/x4dKLg).
    paths:
      /rest/api/3/workflowscheme/{id}/workflow:
        put:
          summary: Set Issue Types For Workflow In Workflow Scheme
          description: >-
            Sets the issue types for a workflow in a workflow scheme. The workflow
            can also be set as the default workflow for the workflow scheme.
            Unmapped issues types are mapped to the default workflow.Note that
            active workflow schemes cannot be edited. If the workflow scheme is
            active, set `updateDraftIfNeeded` to `true` in the request body and a
            draft workflow scheme is created or updated with the new workflow-issue
            types mappings. The draft workflow scheme can be published in
            Jira.**[Permissions](#permissions) required:** *Administer Jira* [global
            permission](https://confluence.atlassian.com/x/x4dKLg).
          operationId: updateWorkflowMapping
          requestBody:
            required: true
            content:
              application/json:
                example:
                  issueTypes:
                    - '10000'
                  updateDraftIfNeeded: true
                  workflow: jira
                schema:
                  $ref: '#/components/schemas/IssueTypesWorkflowMapping'
          responses:
            '404':
              description: |-
                Returned if any of the following is true:

                 *  The workflow scheme is not found.
                 *  The workflow is not found.
                 *  The workflow is not specified.
