apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Check Content Permissions
  description: >-
    Check if a user or a group can perform an operation to the specified
    content. The `operation` to checkmust be provided. The user’s account ID or
    the ID of the group can be provided in the `subject` to checkpermissions
    against a specified user or group. The following permission checks are done
    to make sure that theuser or group has the proper access:- site permissions-
    space permissions- content
    restrictions**[Permissions](https://confluence.atlassian.com/x/_AozKw)
    required**:Permission to access the Confluence site ('Can use' global
    permission) if checking permission for self,otherwise 'Confluence
    Administrator' global permission is required.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Check Content Permissions
      description: >-
        Check if a user or a group can perform an operation to the specified
        content. The `operation` to checkmust be provided. The user’s account ID or
        the ID of the group can be provided in the `subject` to checkpermissions
        against a specified user or group. The following permission checks are done
        to make sure that theuser or group has the proper access:- site permissions-
        space permissions- content
        restrictions**[Permissions](https://confluence.atlassian.com/x/_AozKw)
        required**:Permission to access the Confluence site ('Can use' global
        permission) if checking permission for self,otherwise 'Confluence
        Administrator' global permission is required.
    paths:
      /wiki/rest/api/content/{id}/permission/check:
        post:
          summary: Check Content Permissions
          description: >-
            Check if a user or a group can perform an operation to the specified
            content. The `operation` to checkmust be provided. The user’s account ID
            or the ID of the group can be provided in the `subject` to
            checkpermissions against a specified user or group. The following
            permission checks are done to make sure that theuser or group has the
            proper access:- site permissions- space permissions- content
            restrictions**[Permissions](https://confluence.atlassian.com/x/_AozKw)
            required**:Permission to access the Confluence site ('Can use' global
            permission) if checking permission for self,otherwise 'Confluence
            Administrator' global permission is required.
          operationId: checkContentPermission
          requestBody:
            description: The content permission request.
            required: true
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ContentPermissionRequest'
          responses:
            '404':
              description: Returned if there is no content with the given ID.
              content: {}
