apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Add A Repository Collaborator
  description: >-
    This endpoint triggers
    [notifications](https://docs.github.com/enterprise-server@3.9/github/managing-subscriptions-and-notifications-on-github/about-notifications).
    Creating content too quickly using this endpoint may result in secondary
    rate limiting. For more information, see "[Rate limits for the
    API](https://docs.github.com/enterprise-server@3.9/rest/overview/rate-limits-for-the-rest-api#about-secondary-rate-limits)"
    and "[Best practices for using the REST
    API](https://docs.github.com/enterprise-server@3.9/rest/guides/best-practices-for-using-the-rest-api)."Adding
    an outside collaborator may be restricted by enterprise administrators. For
    more information, see "[Enforcing repository management policies in your
    enterprise](https://docs.github.com/enterprise-server@3.9/admin/policies/enforcing-policies-for-your-enterprise/enforcing-repository-management-policies-in-your-enterprise#enforcing-a-policy-for-inviting-outside-collaborators-to-repositories)."For
    more information on permission levels, see "[Repository permission levels
    for an
    organization](https://docs.github.com/enterprise-server@3.9/github/setting-up-and-managing-organizations-and-teams/repository-permission-levels-for-an-organization#permission-levels-for-repositories-owned-by-an-organization)".
    There are restrictions on which permissions can be granted to organization
    members when an organization base role is in place. In this case, the
    permission being given must be equal to or higher than the org base
    permission. Otherwise, the request will fail with:```Cannot assign {member}
    permission of {role name}```Note that, if you choose not to pass any
    parameters, you'll need to set `Content-Length` to zero when calling out to
    this endpoint. For more information, see "[HTTP
    method](https://docs.github.com/enterprise-server@3.9/rest/guides/getting-started-with-the-rest-api#http-method)."**Updating
    an existing collaborator's permission level**The endpoint can also be used
    to change the permissions of an existing collaborator without first removing
    and re-adding the collaborator. To change the permissions, use the same
    endpoint and pass a different `permission` parameter. The response will be a
    `204`, with no other indication that the permission level changed.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Add A Repository Collaborator
      description: >-
        This endpoint triggers
        [notifications](https://docs.github.com/enterprise-server@3.9/github/managing-subscriptions-and-notifications-on-github/about-notifications).
        Creating content too quickly using this endpoint may result in secondary
        rate limiting. For more information, see "[Rate limits for the
        API](https://docs.github.com/enterprise-server@3.9/rest/overview/rate-limits-for-the-rest-api#about-secondary-rate-limits)"
        and "[Best practices for using the REST
        API](https://docs.github.com/enterprise-server@3.9/rest/guides/best-practices-for-using-the-rest-api)."Adding
        an outside collaborator may be restricted by enterprise administrators. For
        more information, see "[Enforcing repository management policies in your
        enterprise](https://docs.github.com/enterprise-server@3.9/admin/policies/enforcing-policies-for-your-enterprise/enforcing-repository-management-policies-in-your-enterprise#enforcing-a-policy-for-inviting-outside-collaborators-to-repositories)."For
        more information on permission levels, see "[Repository permission levels
        for an
        organization](https://docs.github.com/enterprise-server@3.9/github/setting-up-and-managing-organizations-and-teams/repository-permission-levels-for-an-organization#permission-levels-for-repositories-owned-by-an-organization)".
        There are restrictions on which permissions can be granted to organization
        members when an organization base role is in place. In this case, the
        permission being given must be equal to or higher than the org base
        permission. Otherwise, the request will fail with:```Cannot assign {member}
        permission of {role name}```Note that, if you choose not to pass any
        parameters, you'll need to set `Content-Length` to zero when calling out to
        this endpoint. For more information, see "[HTTP
        method](https://docs.github.com/enterprise-server@3.9/rest/guides/getting-started-with-the-rest-api#http-method)."**Updating
        an existing collaborator's permission level**The endpoint can also be used
        to change the permissions of an existing collaborator without first removing
        and re-adding the collaborator. To change the permissions, use the same
        endpoint and pass a different `permission` parameter. The response will be a
        `204`, with no other indication that the permission level changed.
    paths:
      /repos/{owner}/{repo}/collaborators/{username}:
        put:
          summary: Add A Repository Collaborator
          description: >-
            This endpoint triggers
            [notifications](https://docs.github.com/enterprise-server@3.9/github/managing-subscriptions-and-notifications-on-github/about-notifications).
            Creating content too quickly using this endpoint may result in secondary
            rate limiting. For more information, see "[Rate limits for the
            API](https://docs.github.com/enterprise-server@3.9/rest/overview/rate-limits-for-the-rest-api#about-secondary-rate-limits)"
            and "[Best practices for using the REST
            API](https://docs.github.com/enterprise-server@3.9/rest/guides/best-practices-for-using-the-rest-api)."Adding
            an outside collaborator may be restricted by enterprise administrators.
            For more information, see "[Enforcing repository management policies in
            your
            enterprise](https://docs.github.com/enterprise-server@3.9/admin/policies/enforcing-policies-for-your-enterprise/enforcing-repository-management-policies-in-your-enterprise#enforcing-a-policy-for-inviting-outside-collaborators-to-repositories)."For
            more information on permission levels, see "[Repository permission
            levels for an
            organization](https://docs.github.com/enterprise-server@3.9/github/setting-up-and-managing-organizations-and-teams/repository-permission-levels-for-an-organization#permission-levels-for-repositories-owned-by-an-organization)".
            There are restrictions on which permissions can be granted to
            organization members when an organization base role is in place. In this
            case, the permission being given must be equal to or higher than the org
            base permission. Otherwise, the request will fail with:```Cannot assign
            {member} permission of {role name}```Note that, if you choose not to
            pass any parameters, you'll need to set `Content-Length` to zero when
            calling out to this endpoint. For more information, see "[HTTP
            method](https://docs.github.com/enterprise-server@3.9/rest/guides/getting-started-with-the-rest-api#http-method)."**Updating
            an existing collaborator's permission level**The endpoint can also be
            used to change the permissions of an existing collaborator without first
            removing and re-adding the collaborator. To change the permissions, use
            the same endpoint and pass a different `permission` parameter. The
            response will be a `204`, with no other indication that the permission
            level changed.
          operationId: reposaddcollaborator
          requestBody:
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    permission:
                      type: string
                      description: >-
                        The permission to grant the collaborator. **Only valid on
                        organization-owned repositories.**
                      default: push
                examples:
                  new-invitation-is-created:
                    summary: Add a collaborator with triage permissions
                    value:
                      permission: triage
          responses:
            '422':
              $ref: '#/components/responses/validation_failed'
