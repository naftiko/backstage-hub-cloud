apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Add Or Update Team Repository Permissions (legacy)
  description: >-
    **Deprecation Notice:** This endpoint route is deprecated and will be
    removed from the Teams API. We recommend migrating your existing code to use
    the new "[Add or update team repository
    permissions](https://docs.github.com/enterprise-server@3.9/rest/teams/teams#add-or-update-team-repository-permissions)"
    endpoint.To add a repository to a team or update the team's permission on a
    repository, the authenticated user must have admin access to the repository,
    and must be able to see the team. The repository must be owned by the
    organization, or a direct fork of a repository owned by the organization.
    You will get a `422 Unprocessable Entity` status if you attempt to add a
    repository to a team that is not owned by the organization.Note that, if you
    choose not to pass any parameters, you'll need to set `Content-Length` to
    zero when calling out to this endpoint. For more information, see "[HTTP
    method](https://docs.github.com/enterprise-server@3.9/rest/guides/getting-started-with-the-rest-api#http-method)."
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Add Or Update Team Repository Permissions (legacy)
      description: >-
        **Deprecation Notice:** This endpoint route is deprecated and will be
        removed from the Teams API. We recommend migrating your existing code to use
        the new "[Add or update team repository
        permissions](https://docs.github.com/enterprise-server@3.9/rest/teams/teams#add-or-update-team-repository-permissions)"
        endpoint.To add a repository to a team or update the team's permission on a
        repository, the authenticated user must have admin access to the repository,
        and must be able to see the team. The repository must be owned by the
        organization, or a direct fork of a repository owned by the organization.
        You will get a `422 Unprocessable Entity` status if you attempt to add a
        repository to a team that is not owned by the organization.Note that, if you
        choose not to pass any parameters, you'll need to set `Content-Length` to
        zero when calling out to this endpoint. For more information, see "[HTTP
        method](https://docs.github.com/enterprise-server@3.9/rest/guides/getting-started-with-the-rest-api#http-method)."
    paths:
      /teams/{team_id}/repos/{owner}/{repo}:
        put:
          summary: Add Or Update Team Repository Permissions (legacy)
          description: >-
            **Deprecation Notice:** This endpoint route is deprecated and will be
            removed from the Teams API. We recommend migrating your existing code to
            use the new "[Add or update team repository
            permissions](https://docs.github.com/enterprise-server@3.9/rest/teams/teams#add-or-update-team-repository-permissions)"
            endpoint.To add a repository to a team or update the team's permission
            on a repository, the authenticated user must have admin access to the
            repository, and must be able to see the team. The repository must be
            owned by the organization, or a direct fork of a repository owned by the
            organization. You will get a `422 Unprocessable Entity` status if you
            attempt to add a repository to a team that is not owned by the
            organization.Note that, if you choose not to pass any parameters, you'll
            need to set `Content-Length` to zero when calling out to this endpoint.
            For more information, see "[HTTP
            method](https://docs.github.com/enterprise-server@3.9/rest/guides/getting-started-with-the-rest-api#http-method)."
          operationId: teamsaddorupdaterepopermissionslegacy
          requestBody:
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    permission:
                      type: string
                      description: >-
                        The permission to grant the team on this repository. If no
                        permission is specified, the team's `permission` attribute
                        will be used to determine what permission to grant the team
                        on this repository.
                      enum:
                        - pull
                        - push
                        - admin
                examples:
                  default:
                    summary: Example of setting permission to pull
                    value:
                      permission: push
          responses:
            '422':
              $ref: '#/components/responses/validation_failed'
