apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Create A New Authorization
  description: >-
    **Deprecation Notice:** GitHub Enterprise Server will discontinue the [OAuth
    Authorizations
    API](https://docs.github.com/enterprise-server@3.9/rest/oauth-authorizations/oauth-authorizations),
    which is used by integrations to create personal access tokens and OAuth
    tokens, and you must now create these tokens using our [web application
    flow](https://docs.github.com/enterprise-server@3.9/developers/apps/authorizing-oauth-apps#web-application-flow).
    The [OAuth Authorizations
    API](https://docs.github.com/enterprise-server@3.9/rest/oauth-authorizations/oauth-authorizations)
    will be removed on November, 13, 2020. For more information, including
    scheduled brownouts, see the [blog
    post](https://developer.github.com/changes/2020-02-14-deprecating-oauth-auth-endpoint/).**Warning:**
    Apps must use the [web application
    flow](https://docs.github.com/enterprise-server@3.9/apps/building-oauth-apps/authorizing-oauth-apps/#web-application-flow)
    to obtain OAuth tokens that work with GitHub Enterprise Server SAML
    organizations. OAuth tokens created using the Authorizations API will be
    unable to access GitHub Enterprise Server SAML organizations. For more
    information, see the [blog
    post](https://developer.github.com/changes/2019-11-05-deprecated-passwords-and-authorizations-api).Creates
    OAuth tokens using [Basic
    Authentication](https://docs.github.com/enterprise-server@3.9/rest/overview/other-authentication-methods#basic-authentication).
    If you have two-factor authentication setup, Basic Authentication for this
    endpoint requires that you use a one-time password (OTP) and your username
    and password instead of tokens. For more information, see "[Working with
    two-factor
    authentication](https://docs.github.com/enterprise-server@3.9/rest/overview/other-authentication-methods#working-with-two-factor-authentication)."To
    create tokens for a particular OAuth application using this endpoint, you
    must authenticate as the user you want to create an authorization for and
    provide the app's client ID and secret, found on your OAuth application's
    settings page. If your OAuth application intends to create multiple tokens
    for one user, use `fingerprint` to differentiate between them.You can also
    create tokens on GitHub Enterprise Server from the [personal access tokens
    settings](https://github.com/settings/tokens) page. Read more about these
    tokens in [the GitHub Help
    documentation](https://docs.github.com/enterprise-server@3.9/articles/creating-an-access-token-for-command-line-use).Organizations
    that enforce SAML SSO require personal access tokens to be allowed. For more
    information, see "[About identity and access management with SAML single
    sign-on](https://docs.github.com/enterprise-server@3.9/enterprise-cloud@latest/organizations/managing-saml-single-sign-on-for-your-organization/about-identity-and-access-management-with-saml-single-sign-on)"
    in the GitHub Enterprise Cloud documentation.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Create A New Authorization
      description: >-
        **Deprecation Notice:** GitHub Enterprise Server will discontinue the [OAuth
        Authorizations
        API](https://docs.github.com/enterprise-server@3.9/rest/oauth-authorizations/oauth-authorizations),
        which is used by integrations to create personal access tokens and OAuth
        tokens, and you must now create these tokens using our [web application
        flow](https://docs.github.com/enterprise-server@3.9/developers/apps/authorizing-oauth-apps#web-application-flow).
        The [OAuth Authorizations
        API](https://docs.github.com/enterprise-server@3.9/rest/oauth-authorizations/oauth-authorizations)
        will be removed on November, 13, 2020. For more information, including
        scheduled brownouts, see the [blog
        post](https://developer.github.com/changes/2020-02-14-deprecating-oauth-auth-endpoint/).**Warning:**
        Apps must use the [web application
        flow](https://docs.github.com/enterprise-server@3.9/apps/building-oauth-apps/authorizing-oauth-apps/#web-application-flow)
        to obtain OAuth tokens that work with GitHub Enterprise Server SAML
        organizations. OAuth tokens created using the Authorizations API will be
        unable to access GitHub Enterprise Server SAML organizations. For more
        information, see the [blog
        post](https://developer.github.com/changes/2019-11-05-deprecated-passwords-and-authorizations-api).Creates
        OAuth tokens using [Basic
        Authentication](https://docs.github.com/enterprise-server@3.9/rest/overview/other-authentication-methods#basic-authentication).
        If you have two-factor authentication setup, Basic Authentication for this
        endpoint requires that you use a one-time password (OTP) and your username
        and password instead of tokens. For more information, see "[Working with
        two-factor
        authentication](https://docs.github.com/enterprise-server@3.9/rest/overview/other-authentication-methods#working-with-two-factor-authentication)."To
        create tokens for a particular OAuth application using this endpoint, you
        must authenticate as the user you want to create an authorization for and
        provide the app's client ID and secret, found on your OAuth application's
        settings page. If your OAuth application intends to create multiple tokens
        for one user, use `fingerprint` to differentiate between them.You can also
        create tokens on GitHub Enterprise Server from the [personal access tokens
        settings](https://github.com/settings/tokens) page. Read more about these
        tokens in [the GitHub Help
        documentation](https://docs.github.com/enterprise-server@3.9/articles/creating-an-access-token-for-command-line-use).Organizations
        that enforce SAML SSO require personal access tokens to be allowed. For more
        information, see "[About identity and access management with SAML single
        sign-on](https://docs.github.com/enterprise-server@3.9/enterprise-cloud@latest/organizations/managing-saml-single-sign-on-for-your-organization/about-identity-and-access-management-with-saml-single-sign-on)"
        in the GitHub Enterprise Cloud documentation.
    paths:
      /authorizations:
        post:
          summary: Create A New Authorization
          description: >-
            **Deprecation Notice:** GitHub Enterprise Server will discontinue the
            [OAuth Authorizations
            API](https://docs.github.com/enterprise-server@3.9/rest/oauth-authorizations/oauth-authorizations),
            which is used by integrations to create personal access tokens and OAuth
            tokens, and you must now create these tokens using our [web application
            flow](https://docs.github.com/enterprise-server@3.9/developers/apps/authorizing-oauth-apps#web-application-flow).
            The [OAuth Authorizations
            API](https://docs.github.com/enterprise-server@3.9/rest/oauth-authorizations/oauth-authorizations)
            will be removed on November, 13, 2020. For more information, including
            scheduled brownouts, see the [blog
            post](https://developer.github.com/changes/2020-02-14-deprecating-oauth-auth-endpoint/).**Warning:**
            Apps must use the [web application
            flow](https://docs.github.com/enterprise-server@3.9/apps/building-oauth-apps/authorizing-oauth-apps/#web-application-flow)
            to obtain OAuth tokens that work with GitHub Enterprise Server SAML
            organizations. OAuth tokens created using the Authorizations API will be
            unable to access GitHub Enterprise Server SAML organizations. For more
            information, see the [blog
            post](https://developer.github.com/changes/2019-11-05-deprecated-passwords-and-authorizations-api).Creates
            OAuth tokens using [Basic
            Authentication](https://docs.github.com/enterprise-server@3.9/rest/overview/other-authentication-methods#basic-authentication).
            If you have two-factor authentication setup, Basic Authentication for
            this endpoint requires that you use a one-time password (OTP) and your
            username and password instead of tokens. For more information, see
            "[Working with two-factor
            authentication](https://docs.github.com/enterprise-server@3.9/rest/overview/other-authentication-methods#working-with-two-factor-authentication)."To
            create tokens for a particular OAuth application using this endpoint,
            you must authenticate as the user you want to create an authorization
            for and provide the app's client ID and secret, found on your OAuth
            application's settings page. If your OAuth application intends to create
            multiple tokens for one user, use `fingerprint` to differentiate between
            them.You can also create tokens on GitHub Enterprise Server from the
            [personal access tokens settings](https://github.com/settings/tokens)
            page. Read more about these tokens in [the GitHub Help
            documentation](https://docs.github.com/enterprise-server@3.9/articles/creating-an-access-token-for-command-line-use).Organizations
            that enforce SAML SSO require personal access tokens to be allowed. For
            more information, see "[About identity and access management with SAML
            single
            sign-on](https://docs.github.com/enterprise-server@3.9/enterprise-cloud@latest/organizations/managing-saml-single-sign-on-for-your-organization/about-identity-and-access-management-with-saml-single-sign-on)"
            in the GitHub Enterprise Cloud documentation.
          operationId: oauthauthorizationscreateauthorization
          requestBody:
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    scopes:
                      description: A list of scopes that this authorization is in.
                      type: array
                      items:
                        type: string
                      example:
                        - public_repo
                        - user
                      nullable: true
                    note:
                      description: A note to remind you what the OAuth token is for.
                      type: string
                      example: Update all gems
                    note_url:
                      description: A URL to remind you what app the OAuth token is for.
                      type: string
                    client_id:
                      description: The OAuth app client key for which to create the token.
                      maxLength: 20
                      type: string
                    client_secret:
                      description: The OAuth app client secret for which to create the token.
                      maxLength: 40
                      type: string
                    fingerprint:
                      description: >-
                        A unique string to distinguish an authorization from others
                        created for the same client ID and user.
                      type: string
                examples:
                  default:
                    summary: Create an authorization
                    value:
                      scopes:
                        - public_repo
                      note: optional note
                      note_url: http://optional/note/url
                      client_id: abcde12345fghij67890
                      client_secret: 3ef4ad510c59ad37bac6bb4f80047fb3aee3cc7f
          responses:
            '422':
              $ref: '#/components/responses/validation_failed'
