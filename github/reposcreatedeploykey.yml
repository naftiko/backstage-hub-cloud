apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Create A Deploy Key
  description: You can create a read-only deploy key.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Create A Deploy Key
      description: You can create a read-only deploy key.
    paths:
      /repos/{owner}/{repo}/keys:
        post:
          summary: Create A Deploy Key
          description: You can create a read-only deploy key.
          operationId: reposcreatedeploykey
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    title:
                      type: string
                      description: A name for the key.
                    key:
                      type: string
                      description: The contents of the key.
                    read_only:
                      type: boolean
                      description: >-
                        If `true`, the key will only be able to read repository
                        contents. Otherwise, the key will be able to read and
                        write.  
                          
                        Deploy keys with write access can perform the same actions
                        as an organization member with admin access, or a
                        collaborator on a personal repository. For more information,
                        see "[Repository permission levels for an
                        organization](https://docs.github.com/enterprise-server@3.9/articles/repository-permission-levels-for-an-organization/)"
                        and "[Permission levels for a user account
                        repository](https://docs.github.com/enterprise-server@3.9/articles/permission-levels-for-a-user-account-repository/)."
                  required:
                    - key
                examples:
                  default:
                    value:
                      title: octocat@octomac
                      key: ssh-rsa AAA...
                      read_only: true
          responses:
            '422':
              $ref: '#/components/responses/validation_failed'
