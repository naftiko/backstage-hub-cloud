apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Rename A Branch
  description: >-
    Renames a branch in a repository.**Note:** Although the API responds
    immediately, the branch rename process might take some extra time to
    complete in the background. You won't be able to push to the old branch name
    while the rename process is in progress. For more information, see
    "[Renaming a
    branch](https://docs.github.com/enterprise-server@3.9/github/administering-a-repository/renaming-a-branch)".The
    authenticated user must have push access to the branch. If the branch is the
    default branch, the authenticated user must also have admin or owner
    permissions.In order to rename the default branch, fine-grained access
    tokens also need the `administration:write` repository permission.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Rename A Branch
      description: >-
        Renames a branch in a repository.**Note:** Although the API responds
        immediately, the branch rename process might take some extra time to
        complete in the background. You won't be able to push to the old branch name
        while the rename process is in progress. For more information, see
        "[Renaming a
        branch](https://docs.github.com/enterprise-server@3.9/github/administering-a-repository/renaming-a-branch)".The
        authenticated user must have push access to the branch. If the branch is the
        default branch, the authenticated user must also have admin or owner
        permissions.In order to rename the default branch, fine-grained access
        tokens also need the `administration:write` repository permission.
    paths:
      /repos/{owner}/{repo}/branches/{branch}/rename:
        post:
          summary: Rename A Branch
          description: >-
            Renames a branch in a repository.**Note:** Although the API responds
            immediately, the branch rename process might take some extra time to
            complete in the background. You won't be able to push to the old branch
            name while the rename process is in progress. For more information, see
            "[Renaming a
            branch](https://docs.github.com/enterprise-server@3.9/github/administering-a-repository/renaming-a-branch)".The
            authenticated user must have push access to the branch. If the branch is
            the default branch, the authenticated user must also have admin or owner
            permissions.In order to rename the default branch, fine-grained access
            tokens also need the `administration:write` repository permission.
          operationId: renameABranch
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    new_name:
                      type: string
                      description: The new name of the branch.
                  required:
                    - new_name
                examples:
                  default:
                    value:
                      new_name: my_renamed_branch
          responses:
            '422':
              $ref: '#/components/responses/validation_failed'
