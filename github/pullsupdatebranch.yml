apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Update A Pull Request Branch
  description: >-
    Updates the pull request branch with the latest upstream changes by merging
    HEAD from the base branch into the pull request branch.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Update A Pull Request Branch
      description: >-
        Updates the pull request branch with the latest upstream changes by merging
        HEAD from the base branch into the pull request branch.
    paths:
      /repos/{owner}/{repo}/pulls/{pull_number}/update-branch:
        put:
          summary: Update A Pull Request Branch
          description: >-
            Updates the pull request branch with the latest upstream changes by
            merging HEAD from the base branch into the pull request branch.
          operationId: pullsupdatebranch
          requestBody:
            content:
              application/json:
                schema:
                  type: object
                  nullable: true
                  properties:
                    expected_head_sha:
                      type: string
                      description: >-
                        The expected SHA of the pull request's HEAD ref. This is the
                        most recent commit on the pull request's branch. If the
                        expected SHA does not match the pull request's HEAD, you
                        will receive a `422 Unprocessable Entity` status. You can
                        use the "[List
                        commits](https://docs.github.com/enterprise-server@3.9/rest/commits/commits#list-commits)"
                        endpoint to find the most recent commit SHA. Default: SHA of
                        the pull request's current HEAD ref.
                examples:
                  default:
                    value:
                      expected_head_sha: 6dcb09b5b57875f334f61aebed695e2e4193db5e
          responses:
            '422':
              $ref: '#/components/responses/validation_failed'
