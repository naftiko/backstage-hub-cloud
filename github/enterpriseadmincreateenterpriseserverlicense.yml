apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Create A Github License
  description: >-
    When you boot a GitHub instance for the first time, you can use the
    following endpoint to upload a license.Note that you need to `POST` to
    [`/setup/api/configure`](https://docs.github.com/enterprise-server@3.9/rest/enterprise-admin/management-console#start-a-configuration-process)
    to start the actual configuration process.When using this endpoint, your
    GitHub instance must have a password set. This can be accomplished two
    ways:1.  If you're working directly with the API before accessing the web
    interface, you must pass in the password parameter to set your password.2. 
    If you set up your instance via the web interface before accessing the API,
    your calls to this endpoint do not need the password parameter.**Note:** The
    request body for this operation must be submitted as `multipart/form-data`
    data. You can can reference the license file by prefixing the filename with
    the `@` symbol using `curl`. For more information, see the [`curl`
    documentation](https://curl.se/docs/manpage.html#-F).
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Create A Github License
      description: >-
        When you boot a GitHub instance for the first time, you can use the
        following endpoint to upload a license.Note that you need to `POST` to
        [`/setup/api/configure`](https://docs.github.com/enterprise-server@3.9/rest/enterprise-admin/management-console#start-a-configuration-process)
        to start the actual configuration process.When using this endpoint, your
        GitHub instance must have a password set. This can be accomplished two
        ways:1.  If you're working directly with the API before accessing the web
        interface, you must pass in the password parameter to set your password.2. 
        If you set up your instance via the web interface before accessing the API,
        your calls to this endpoint do not need the password parameter.**Note:** The
        request body for this operation must be submitted as `multipart/form-data`
        data. You can can reference the license file by prefixing the filename with
        the `@` symbol using `curl`. For more information, see the [`curl`
        documentation](https://curl.se/docs/manpage.html#-F).
    paths:
      /setup/api/start:
        post:
          summary: Create A Github License
          description: >-
            When you boot a GitHub instance for the first time, you can use the
            following endpoint to upload a license.Note that you need to `POST` to
            [`/setup/api/configure`](https://docs.github.com/enterprise-server@3.9/rest/enterprise-admin/management-console#start-a-configuration-process)
            to start the actual configuration process.When using this endpoint, your
            GitHub instance must have a password set. This can be accomplished two
            ways:1.  If you're working directly with the API before accessing the
            web interface, you must pass in the password parameter to set your
            password.2.  If you set up your instance via the web interface before
            accessing the API, your calls to this endpoint do not need the password
            parameter.**Note:** The request body for this operation must be
            submitted as `multipart/form-data` data. You can can reference the
            license file by prefixing the filename with the `@` symbol using `curl`.
            For more information, see the [`curl`
            documentation](https://curl.se/docs/manpage.html#-F).
          operationId: enterpriseadmincreateenterpriseserverlicense
          requestBody:
            required: true
            content:
              multipart/form-data:
                schema:
                  type: object
                  properties:
                    license:
                      type: string
                      description: The content of your _.ghl_ license file.
                    password:
                      type: string
                      description: >-
                        You **must** provide a password _only if_ you are uploading
                        your license for the first time. If you previously set a
                        password through the web interface, you don't need this
                        parameter.
                    settings:
                      type: string
                      description: >-
                        An optional JSON string containing the installation
                        settings. For a list of the available settings, see the [Get
                        settings
                        endpoint](https://docs.github.com/enterprise-server@3.9/rest/enterprise-admin/management-console#get-settings).
                  required:
                    - license
                examples:
                  default:
                    value:
                      license: '@enterprise.ghl'
                      password: secret
          responses:
            '401':
              description: Unauthorized
