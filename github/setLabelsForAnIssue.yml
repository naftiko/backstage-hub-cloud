apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Set Labels For An Issue
  description: Removes any previous labels and sets the new labels for an issue.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Set Labels For An Issue
      description: Removes any previous labels and sets the new labels for an issue.
    paths:
      /repos/{owner}/{repo}/issues/{issue_number}/labels:
        put:
          summary: Set Labels For An Issue
          description: Removes any previous labels and sets the new labels for an issue.
          operationId: setLabelsForAnIssue
          requestBody:
            content:
              application/json:
                schema:
                  oneOf:
                    - type: object
                      properties:
                        labels:
                          type: array
                          minItems: 1
                          description: >-
                            The names of the labels to set for the issue. The labels
                            you set replace any existing labels. You can pass an
                            empty array to remove all labels. Alternatively, you can
                            pass a single label as a `string` or an `array` of
                            labels directly, but GitHub recommends passing an object
                            with the `labels` key. You can also add labels to the
                            existing labels for an issue. For more information, see
                            "[Add labels to an
                            issue](https://docs.github.com/enterprise-server@3.9/rest/issues/labels#add-labels-to-an-issue)."
                          items:
                            type: string
                    - type: array
                      minItems: 1
                      items:
                        type: string
                    - type: object
                      properties:
                        labels:
                          type: array
                          minItems: 1
                          items:
                            type: object
                            properties:
                              name:
                                type: string
                            required:
                              - name
                    - type: array
                      minItems: 1
                      items:
                        type: object
                        properties:
                          name:
                            type: string
                        required:
                          - name
                    - type: string
                examples:
                  default:
                    value:
                      labels:
                        - bug
                        - enhancement
          responses:
            '422':
              $ref: '#/components/responses/validation_failed'
