apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Create A Snapshot Of Dependencies For A Repository
  description: >-
    Create a new snapshot of a repository's dependencies.The authenticated user
    must have access to the repository.OAuth app tokens and personal access
    tokens (classic) need the `repo` scope to use this endpoint.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Create A Snapshot Of Dependencies For A Repository
      description: >-
        Create a new snapshot of a repository's dependencies.The authenticated user
        must have access to the repository.OAuth app tokens and personal access
        tokens (classic) need the `repo` scope to use this endpoint.
    paths:
      /repos/{owner}/{repo}/dependency-graph/snapshots:
        post:
          summary: Create A Snapshot Of Dependencies For A Repository
          description: >-
            Create a new snapshot of a repository's dependencies.The authenticated
            user must have access to the repository.OAuth app tokens and personal
            access tokens (classic) need the `repo` scope to use this endpoint.
          operationId: dependencygraphcreaterepositorysnapshot
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/snapshot'
                examples:
                  example-of-a-dependency-submission:
                    $ref: '#/components/examples/dependency-graph-create-snapshot-request'
          responses:
            '201':
              description: Response
              content:
                application/json:
                  schema:
                    type: object
                    required:
                      - id
                      - created_at
                      - result
                      - message
                    properties:
                      id:
                        type: integer
                        description: ID of the created snapshot.
                      created_at:
                        type: string
                        description: The time at which the snapshot was created.
                      result:
                        type: string
                        description: >-
                          Either "SUCCESS", "ACCEPTED", or "INVALID". "SUCCESS"
                          indicates that the snapshot was successfully created and
                          the repository's dependencies were updated. "ACCEPTED"
                          indicates that the snapshot was successfully created, but
                          the repository's dependencies were not updated. "INVALID"
                          indicates that the snapshot was malformed.
                      message:
                        type: string
                        description: >-
                          A message providing further details about the result, such
                          as why the dependencies were not updated.
                  examples:
                    example-of-a-dependency-submission:
                      $ref: >-
                        #/components/examples/dependency-graph-create-snapshot-success
