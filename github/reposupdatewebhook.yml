apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Update A Repository Webhook
  description: >-
    Updates a webhook configured in a repository. If you previously had a
    `secret` set, you must provide the same `secret` or set a new `secret` or
    the secret will be removed. If you are only updating individual webhook
    `config` properties, use "[Update a webhook configuration for a
    repository](/rest/webhooks/repo-config#update-a-webhook-configuration-for-a-repository)."
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Update A Repository Webhook
      description: >-
        Updates a webhook configured in a repository. If you previously had a
        `secret` set, you must provide the same `secret` or set a new `secret` or
        the secret will be removed. If you are only updating individual webhook
        `config` properties, use "[Update a webhook configuration for a
        repository](/rest/webhooks/repo-config#update-a-webhook-configuration-for-a-repository)."
    paths:
      /repos/{owner}/{repo}/hooks/{hook_id}:
        patch:
          summary: Update A Repository Webhook
          description: >-
            Updates a webhook configured in a repository. If you previously had a
            `secret` set, you must provide the same `secret` or set a new `secret`
            or the secret will be removed. If you are only updating individual
            webhook `config` properties, use "[Update a webhook configuration for a
            repository](/rest/webhooks/repo-config#update-a-webhook-configuration-for-a-repository)."
          operationId: reposupdatewebhook
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    config:
                      $ref: '#/components/schemas/webhook-config'
                    events:
                      type: array
                      description: >-
                        Determines what
                        [events](https://docs.github.com/enterprise-server@3.9/webhooks/event-payloads)
                        the hook is triggered for. This replaces the entire array of
                        events.
                      default:
                        - push
                      items:
                        type: string
                    add_events:
                      type: array
                      description: >-
                        Determines a list of events to be added to the list of
                        events that the Hook triggers for.
                      items:
                        type: string
                    remove_events:
                      type: array
                      description: >-
                        Determines a list of events to be removed from the list of
                        events that the Hook triggers for.
                      items:
                        type: string
                    active:
                      type: boolean
                      description: >-
                        Determines if notifications are sent when the webhook is
                        triggered. Set to `true` to send notifications.
                      default: true
                examples:
                  default:
                    value:
                      active: true
                      add_events:
                        - pull_request
          responses:
            '422':
              $ref: '#/components/responses/validation_failed'
