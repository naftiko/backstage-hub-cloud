apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Create A Team
  description: >-
    To create a team, the authenticated user must be a member or owner of
    `{org}`. By default, organization members can create teams. Organization
    owners can limit team creation to organization owners. For more information,
    see "[Setting team creation
    permissions](https://docs.github.com/enterprise-server@3.9/articles/setting-team-creation-permissions-in-your-organization)."When
    you create a new team, you automatically become a team maintainer without
    explicitly adding yourself to the optional array of `maintainers`. For more
    information, see "[About
    teams](https://docs.github.com/enterprise-server@3.9/github/setting-up-and-managing-organizations-and-teams/about-teams)".
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Create A Team
      description: >-
        To create a team, the authenticated user must be a member or owner of
        `{org}`. By default, organization members can create teams. Organization
        owners can limit team creation to organization owners. For more information,
        see "[Setting team creation
        permissions](https://docs.github.com/enterprise-server@3.9/articles/setting-team-creation-permissions-in-your-organization)."When
        you create a new team, you automatically become a team maintainer without
        explicitly adding yourself to the optional array of `maintainers`. For more
        information, see "[About
        teams](https://docs.github.com/enterprise-server@3.9/github/setting-up-and-managing-organizations-and-teams/about-teams)".
    paths:
      /orgs/{org}/teams:
        post:
          summary: Create A Team
          description: >-
            To create a team, the authenticated user must be a member or owner of
            `{org}`. By default, organization members can create teams. Organization
            owners can limit team creation to organization owners. For more
            information, see "[Setting team creation
            permissions](https://docs.github.com/enterprise-server@3.9/articles/setting-team-creation-permissions-in-your-organization)."When
            you create a new team, you automatically become a team maintainer
            without explicitly adding yourself to the optional array of
            `maintainers`. For more information, see "[About
            teams](https://docs.github.com/enterprise-server@3.9/github/setting-up-and-managing-organizations-and-teams/about-teams)".
          operationId: teamscreate
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    name:
                      type: string
                      description: The name of the team.
                    description:
                      type: string
                      description: The description of the team.
                    maintainers:
                      type: array
                      description: >-
                        List GitHub IDs for organization members who will become
                        team maintainers.
                      items:
                        type: string
                    repo_names:
                      type: array
                      description: >-
                        The full name (e.g., "organization-name/repository-name") of
                        repositories to add the team to.
                      items:
                        type: string
                    privacy:
                      type: string
                      description: >-
                        The level of privacy this team should have. The options
                        are:  

                        **For a non-nested team:**  
                         * `secret` - only visible to organization owners and members of this team.  
                         * `closed` - visible to all members of this organization.  
                        Default: `secret`  

                        **For a parent or child team:**  
                         * `closed` - visible to all members of this organization.  
                        Default for child team: `closed`
                      enum:
                        - secret
                        - closed
                    permission:
                      type: string
                      description: >-
                        **Deprecated**. The permission that new repositories will be
                        added to the team with when none is specified.
                      enum:
                        - pull
                        - push
                      default: pull
                    parent_team_id:
                      type: integer
                      description: The ID of a team to set as the parent team.
                    ldap_dn:
                      type: string
                      description: >-
                        The [distinguished
                        name](https://www.ldap.com/ldap-dns-and-rdns) (DN) of the
                        LDAP entry to map to a team. LDAP synchronization must be
                        enabled to map LDAP entries to a team. Use the "[Update LDAP
                        mapping for a
                        team](https://docs.github.com/enterprise-server@3.9/rest/enterprise-admin/ldap#update-ldap-mapping-for-a-team)"
                        endpoint to change the LDAP DN. For more information, see
                        "[Using
                        LDAP](https://docs.github.com/enterprise-server@3.9/admin/identity-and-access-management/authenticating-users-for-your-github-enterprise-server-instance/using-ldap#enabling-ldap-sync)."
                  required:
                    - name
                examples:
                  default:
                    value:
                      name: Justice League
                      description: A great team
                      permission: push
                      privacy: closed
          responses:
            '422':
              $ref: '#/components/responses/validation_failed'
