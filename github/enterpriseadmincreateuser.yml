apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Create A User
  description: >-
    If an external authentication mechanism is used, the login name should match
    the login name in the external system. If you are using LDAP authentication,
    you should also [update the LDAP
    mapping](https://docs.github.com/enterprise-server@3.9/rest/enterprise-admin/ldap#update-ldap-mapping-for-a-user)
    for the user.The login name will be normalized to only contain alphanumeric
    characters or single hyphens. For example, if you send `"octo_cat"` as the
    login, a user named `"octo-cat"` will be created.If the login name or email
    address is already associated with an account, the server will return a
    `422` response.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Create A User
      description: >-
        If an external authentication mechanism is used, the login name should match
        the login name in the external system. If you are using LDAP authentication,
        you should also [update the LDAP
        mapping](https://docs.github.com/enterprise-server@3.9/rest/enterprise-admin/ldap#update-ldap-mapping-for-a-user)
        for the user.The login name will be normalized to only contain alphanumeric
        characters or single hyphens. For example, if you send `"octo_cat"` as the
        login, a user named `"octo-cat"` will be created.If the login name or email
        address is already associated with an account, the server will return a
        `422` response.
    paths:
      /admin/users:
        post:
          summary: Create A User
          description: >-
            If an external authentication mechanism is used, the login name should
            match the login name in the external system. If you are using LDAP
            authentication, you should also [update the LDAP
            mapping](https://docs.github.com/enterprise-server@3.9/rest/enterprise-admin/ldap#update-ldap-mapping-for-a-user)
            for the user.The login name will be normalized to only contain
            alphanumeric characters or single hyphens. For example, if you send
            `"octo_cat"` as the login, a user named `"octo-cat"` will be created.If
            the login name or email address is already associated with an account,
            the server will return a `422` response.
          operationId: enterpriseadmincreateuser
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    login:
                      type: string
                      description: The user's username.
                    email:
                      type: string
                      description: >-
                        **Required for built-in authentication.** The user's email

                        address. This parameter can be omitted when using CAS, LDAP,
                        or SAML.

                        For more information, see "[About authentication for your
                        enterprise](https://docs.github.com/enterprise-server@3.9/admin/identity-and-access-management/managing-iam-for-your-enterprise/about-authentication-for-your-enterprise)."
                    suspended:
                      type: boolean
                      description: >-
                        Whether to set the user as suspended when the user is
                        created.
                      default: false
                  required:
                    - login
                examples:
                  default:
                    value:
                      login: monalisa
                      email: octocat@github.com
          responses:
            '201':
              description: Response
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/simple-user'
                  examples:
                    default:
                      $ref: '#/components/examples/simple-user'
