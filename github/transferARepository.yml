apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Transfer A Repository
  description: >-
    A transfer request will need to be accepted by the new owner when
    transferring a personal repository to another user. The response will
    contain the original `owner`, and the transfer will continue asynchronously.
    For more details on the requirements to transfer personal and
    organization-owned repositories, see [about repository
    transfers](https://docs.github.com/enterprise-server@3.9/articles/about-repository-transfers/).You
    must use a personal access token or an OAuth token for this endpoint. An
    installation access token cannot be used because it is only granted access
    to a single account.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Transfer A Repository
      description: >-
        A transfer request will need to be accepted by the new owner when
        transferring a personal repository to another user. The response will
        contain the original `owner`, and the transfer will continue asynchronously.
        For more details on the requirements to transfer personal and
        organization-owned repositories, see [about repository
        transfers](https://docs.github.com/enterprise-server@3.9/articles/about-repository-transfers/).You
        must use a personal access token or an OAuth token for this endpoint. An
        installation access token cannot be used because it is only granted access
        to a single account.
    paths:
      /repos/{owner}/{repo}/transfer:
        post:
          summary: Transfer A Repository
          description: >-
            A transfer request will need to be accepted by the new owner when
            transferring a personal repository to another user. The response will
            contain the original `owner`, and the transfer will continue
            asynchronously. For more details on the requirements to transfer
            personal and organization-owned repositories, see [about repository
            transfers](https://docs.github.com/enterprise-server@3.9/articles/about-repository-transfers/).You
            must use a personal access token or an OAuth token for this endpoint. An
            installation access token cannot be used because it is only granted
            access to a single account.
          operationId: transferARepository
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    new_owner:
                      type: string
                      description: >-
                        The username or organization name the repository will be
                        transferred to.
                    new_name:
                      type: string
                      description: The new name to be given to the repository.
                    team_ids:
                      type: array
                      description: >-
                        ID of the team or teams to add to the repository. Teams can
                        only be added to organization-owned repositories.
                      items:
                        type: integer
                  required:
                    - new_owner
                examples:
                  default:
                    value:
                      new_owner: github
                      team_ids:
                        - 12
                        - 345
                      new_name: octorepo
          responses:
            '202':
              description: Response
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/minimal-repository'
                  examples:
                    default:
                      $ref: '#/components/examples/minimal-repository'
