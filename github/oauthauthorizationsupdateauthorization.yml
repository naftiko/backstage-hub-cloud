apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Update An Existing Authorization
  description: >-
    **Deprecation Notice:** GitHub Enterprise Server will discontinue the [OAuth
    Authorizations
    API](https://docs.github.com/enterprise-server@3.9/rest/oauth-authorizations/oauth-authorizations/),
    which is used by integrations to create personal access tokens and OAuth
    tokens, and you must now create these tokens using our [web application
    flow](https://docs.github.com/enterprise-server@3.9/developers/apps/authorizing-oauth-apps#web-application-flow).
    The [OAuth Authorizations
    API](https://docs.github.com/enterprise-server@3.9/rest/oauth-authorizations/oauth-authorizations)
    will be removed on November, 13, 2020. For more information, including
    scheduled brownouts, see the [blog
    post](https://developer.github.com/changes/2020-02-14-deprecating-oauth-auth-endpoint/).If
    you have two-factor authentication setup, Basic Authentication for this
    endpoint requires that you use a one-time password (OTP) and your username
    and password instead of tokens. For more information, see "[Working with
    two-factor
    authentication](https://docs.github.com/enterprise-server@3.9/rest/overview/other-authentication-methods#working-with-two-factor-authentication)."You
    can only send one of these scope keys at a time.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Update An Existing Authorization
      description: >-
        **Deprecation Notice:** GitHub Enterprise Server will discontinue the [OAuth
        Authorizations
        API](https://docs.github.com/enterprise-server@3.9/rest/oauth-authorizations/oauth-authorizations/),
        which is used by integrations to create personal access tokens and OAuth
        tokens, and you must now create these tokens using our [web application
        flow](https://docs.github.com/enterprise-server@3.9/developers/apps/authorizing-oauth-apps#web-application-flow).
        The [OAuth Authorizations
        API](https://docs.github.com/enterprise-server@3.9/rest/oauth-authorizations/oauth-authorizations)
        will be removed on November, 13, 2020. For more information, including
        scheduled brownouts, see the [blog
        post](https://developer.github.com/changes/2020-02-14-deprecating-oauth-auth-endpoint/).If
        you have two-factor authentication setup, Basic Authentication for this
        endpoint requires that you use a one-time password (OTP) and your username
        and password instead of tokens. For more information, see "[Working with
        two-factor
        authentication](https://docs.github.com/enterprise-server@3.9/rest/overview/other-authentication-methods#working-with-two-factor-authentication)."You
        can only send one of these scope keys at a time.
    paths:
      /authorizations/{authorization_id}:
        patch:
          summary: Update An Existing Authorization
          description: >-
            **Deprecation Notice:** GitHub Enterprise Server will discontinue the
            [OAuth Authorizations
            API](https://docs.github.com/enterprise-server@3.9/rest/oauth-authorizations/oauth-authorizations/),
            which is used by integrations to create personal access tokens and OAuth
            tokens, and you must now create these tokens using our [web application
            flow](https://docs.github.com/enterprise-server@3.9/developers/apps/authorizing-oauth-apps#web-application-flow).
            The [OAuth Authorizations
            API](https://docs.github.com/enterprise-server@3.9/rest/oauth-authorizations/oauth-authorizations)
            will be removed on November, 13, 2020. For more information, including
            scheduled brownouts, see the [blog
            post](https://developer.github.com/changes/2020-02-14-deprecating-oauth-auth-endpoint/).If
            you have two-factor authentication setup, Basic Authentication for this
            endpoint requires that you use a one-time password (OTP) and your
            username and password instead of tokens. For more information, see
            "[Working with two-factor
            authentication](https://docs.github.com/enterprise-server@3.9/rest/overview/other-authentication-methods#working-with-two-factor-authentication)."You
            can only send one of these scope keys at a time.
          operationId: oauthauthorizationsupdateauthorization
          requestBody:
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    scopes:
                      description: A list of scopes that this authorization is in.
                      type: array
                      items:
                        type: string
                      example:
                        - public_repo
                        - user
                      nullable: true
                    add_scopes:
                      description: A list of scopes to add to this authorization.
                      type: array
                      items:
                        type: string
                    remove_scopes:
                      description: A list of scopes to remove from this authorization.
                      type: array
                      items:
                        type: string
                    note:
                      description: A note to remind you what the OAuth token is for.
                      type: string
                      example: Update all gems
                    note_url:
                      description: A URL to remind you what app the OAuth token is for.
                      type: string
                    fingerprint:
                      description: >-
                        A unique string to distinguish an authorization from others
                        created for the same client ID and user.
                      type: string
                examples:
                  default:
                    summary: Example of updating scopes and note
                    value:
                      add_scopes:
                        - public_repo
                      remove_scopes:
                        - user
                      note: optional note
          responses:
            '422':
              $ref: '#/components/responses/validation_failed'
