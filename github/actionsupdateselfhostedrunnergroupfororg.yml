apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Update A Self-hosted Runner Group For An Organization
  description: >-
    Updates the `name` and `visibility` of a self-hosted runner group in an
    organization.OAuth app tokens and personal access tokens (classic) need the
    `admin:org` scope to use this endpoint.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Update A Self-hosted Runner Group For An Organization
      description: >-
        Updates the `name` and `visibility` of a self-hosted runner group in an
        organization.OAuth app tokens and personal access tokens (classic) need the
        `admin:org` scope to use this endpoint.
    paths:
      /orgs/{org}/actions/runner-groups/{runner_group_id}:
        patch:
          summary: Update A Self-hosted Runner Group For An Organization
          description: >-
            Updates the `name` and `visibility` of a self-hosted runner group in an
            organization.OAuth app tokens and personal access tokens (classic) need
            the `admin:org` scope to use this endpoint.
          operationId: actionsupdateselfhostedrunnergroupfororg
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    name:
                      description: Name of the runner group.
                      type: string
                    visibility:
                      description: >-
                        Visibility of a runner group. You can select all
                        repositories, select individual repositories, or all private
                        repositories.
                      type: string
                      enum:
                        - selected
                        - all
                        - private
                    allows_public_repositories:
                      description: >-
                        Whether the runner group can be used by `public`
                        repositories.
                      type: boolean
                      default: false
                    restricted_to_workflows:
                      description: >-
                        If `true`, the runner group will be restricted to running
                        only the workflows specified in the `selected_workflows`
                        array.
                      type: boolean
                      default: false
                    selected_workflows:
                      description: >-
                        List of workflows the runner group should be allowed to run.
                        This setting will be ignored unless
                        `restricted_to_workflows` is set to `true`.
                      type: array
                      items:
                        type: string
                        description: >-
                          Name of workflow the runner group should be allowed to
                          run. Note that a ref, tag, or long SHA is required.
                        example: octo-org/octo-repo/.github/workflows/deploy.yaml@main
                  required:
                    - name
                examples:
                  default:
                    value:
                      name: Expensive hardware runners
                      visibility: selected
          responses:
            '200':
              description: Response
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/runner-groups-org'
                  examples:
                    default:
                      $ref: '#/components/examples/runner-group'
