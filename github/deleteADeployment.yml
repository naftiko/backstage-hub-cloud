apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Delete A Deployment
  description: >-
    If the repository only has one deployment, you can delete the deployment
    regardless of its status. If the repository has more than one deployment,
    you can only delete inactive deployments. This ensures that repositories
    with multiple deployments will always have an active deployment.To set a
    deployment as inactive, you must:*   Create a new deployment that is active
    so that the system has a record of the current state, then delete the
    previously active deployment.*   Mark the active deployment as inactive by
    adding any non-successful deployment status.For more information, see
    "[Create a
    deployment](https://docs.github.com/enterprise-server@3.9/rest/deployments/deployments/#create-a-deployment)"
    and "[Create a deployment
    status](https://docs.github.com/enterprise-server@3.9/rest/deployments/statuses#create-a-deployment-status)."OAuth
    app tokens and personal access tokens (classic) need the `repo` or
    `repo_deployment` scope to use this endpoint.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Delete A Deployment
      description: >-
        If the repository only has one deployment, you can delete the deployment
        regardless of its status. If the repository has more than one deployment,
        you can only delete inactive deployments. This ensures that repositories
        with multiple deployments will always have an active deployment.To set a
        deployment as inactive, you must:*   Create a new deployment that is active
        so that the system has a record of the current state, then delete the
        previously active deployment.*   Mark the active deployment as inactive by
        adding any non-successful deployment status.For more information, see
        "[Create a
        deployment](https://docs.github.com/enterprise-server@3.9/rest/deployments/deployments/#create-a-deployment)"
        and "[Create a deployment
        status](https://docs.github.com/enterprise-server@3.9/rest/deployments/statuses#create-a-deployment-status)."OAuth
        app tokens and personal access tokens (classic) need the `repo` or
        `repo_deployment` scope to use this endpoint.
    paths:
      /repos/{owner}/{repo}/deployments/{deployment_id}:
        delete:
          summary: Delete A Deployment
          description: >-
            If the repository only has one deployment, you can delete the deployment
            regardless of its status. If the repository has more than one
            deployment, you can only delete inactive deployments. This ensures that
            repositories with multiple deployments will always have an active
            deployment.To set a deployment as inactive, you must:*   Create a new
            deployment that is active so that the system has a record of the current
            state, then delete the previously active deployment.*   Mark the active
            deployment as inactive by adding any non-successful deployment
            status.For more information, see "[Create a
            deployment](https://docs.github.com/enterprise-server@3.9/rest/deployments/deployments/#create-a-deployment)"
            and "[Create a deployment
            status](https://docs.github.com/enterprise-server@3.9/rest/deployments/statuses#create-a-deployment-status)."OAuth
            app tokens and personal access tokens (classic) need the `repo` or
            `repo_deployment` scope to use this endpoint.
          operationId: deleteADeployment
          responses:
            '422':
              $ref: '#/components/responses/validation_failed_simple'
