apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Create A Reference
  description: >-
    Creates a reference for your repository. You are unable to create new
    references for empty repositories, even if the commit SHA-1 hash used
    exists. Empty repositories are repositories without branches.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Create A Reference
      description: >-
        Creates a reference for your repository. You are unable to create new
        references for empty repositories, even if the commit SHA-1 hash used
        exists. Empty repositories are repositories without branches.
    paths:
      /repos/{owner}/{repo}/git/refs:
        post:
          summary: Create A Reference
          description: >-
            Creates a reference for your repository. You are unable to create new
            references for empty repositories, even if the commit SHA-1 hash used
            exists. Empty repositories are repositories without branches.
          operationId: createAReference
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    ref:
                      type: string
                      description: >-
                        The name of the fully qualified reference (ie:
                        `refs/heads/master`). If it doesn't start with 'refs' and
                        have at least two slashes, it will be rejected.
                    sha:
                      type: string
                      description: The SHA1 value for this reference.
                  required:
                    - ref
                    - sha
                examples:
                  default:
                    value:
                      ref: refs/heads/featureA
                      sha: aa218f56b14c9653891f9e74264a383fa43fefbd
          responses:
            '422':
              $ref: '#/components/responses/validation_failed'
