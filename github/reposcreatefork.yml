apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Create A Fork
  description: >-
    Create a fork for the authenticated user.**Note**: Forking a Repository
    happens asynchronously. You may have to wait a short period of time before
    you can access the git objects. If this takes longer than 5 minutes, be sure
    to contact [GitHub Enterprise Server
    Support](https://support.github.com/contact?tags=dotcom-rest-api).**Note**:
    Although this endpoint works with GitHub Apps, the GitHub App must be
    installed on the destination account with access to all repositories and on
    the source account with access to the source repository.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Create A Fork
      description: >-
        Create a fork for the authenticated user.**Note**: Forking a Repository
        happens asynchronously. You may have to wait a short period of time before
        you can access the git objects. If this takes longer than 5 minutes, be sure
        to contact [GitHub Enterprise Server
        Support](https://support.github.com/contact?tags=dotcom-rest-api).**Note**:
        Although this endpoint works with GitHub Apps, the GitHub App must be
        installed on the destination account with access to all repositories and on
        the source account with access to the source repository.
    paths:
      /repos/{owner}/{repo}/forks:
        post:
          summary: Create A Fork
          description: >-
            Create a fork for the authenticated user.**Note**: Forking a Repository
            happens asynchronously. You may have to wait a short period of time
            before you can access the git objects. If this takes longer than 5
            minutes, be sure to contact [GitHub Enterprise Server
            Support](https://support.github.com/contact?tags=dotcom-rest-api).**Note**:
            Although this endpoint works with GitHub Apps, the GitHub App must be
            installed on the destination account with access to all repositories and
            on the source account with access to the source repository.
          operationId: reposcreatefork
          requestBody:
            content:
              application/json:
                schema:
                  type: object
                  nullable: true
                  properties:
                    organization:
                      type: string
                      description: >-
                        Optional parameter to specify the organization name if
                        forking into an organization.
                    name:
                      type: string
                      description: >-
                        When forking from an existing repository, a new name for the
                        fork.
                    default_branch_only:
                      type: boolean
                      description: >-
                        When forking from an existing repository, fork with only the
                        default branch.
                examples:
                  default:
                    value:
                      organization: octocat
                      name: Hello-World
                      default_branch_only: true
          responses:
            '422':
              $ref: '#/components/responses/validation_failed'
