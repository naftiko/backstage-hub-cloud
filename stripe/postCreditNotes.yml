apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Post Credit_notes
  description: >-
    Issue a credit note to adjust the amount of a finalized invoice. For a
    status=open invoice, a credit note reducesits amount_due. For a status=paid
    invoice, a credit note does not affect its amount_due. Instead, it can
    resultin any combination of the following:Refund: create a new refund (using
    refund_amount) or link an existing refund (using refund).Customer balance
    credit: credit the customer’s balance (using credit_amount) which will be
    automatically applied to their next invoice when it’s finalized.Outside of
    Stripe credit: record the amount that is or will be credited outside of
    Stripe (using out_of_band_amount).For post-payment credit notes the sum of
    the refund, credit and outside of Stripe amounts must equal the credit note
    total.You may issue multiple credit notes for an invoice. Each credit note
    will increment the invoice’s pre_payment_credit_notes_amountor
    post_payment_credit_notes_amount depending on its status at the time of
    credit note creation.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Post Credit_notes
      description: >-
        Issue a credit note to adjust the amount of a finalized invoice. For a
        status=open invoice, a credit note reducesits amount_due. For a status=paid
        invoice, a credit note does not affect its amount_due. Instead, it can
        resultin any combination of the following:Refund: create a new refund (using
        refund_amount) or link an existing refund (using refund).Customer balance
        credit: credit the customer’s balance (using credit_amount) which will be
        automatically applied to their next invoice when it’s finalized.Outside of
        Stripe credit: record the amount that is or will be credited outside of
        Stripe (using out_of_band_amount).For post-payment credit notes the sum of
        the refund, credit and outside of Stripe amounts must equal the credit note
        total.You may issue multiple credit notes for an invoice. Each credit note
        will increment the invoice’s pre_payment_credit_notes_amountor
        post_payment_credit_notes_amount depending on its status at the time of
        credit note creation.
    paths:
      /v1/credit_notes:
        post:
          summary: Post Credit_notes
          description: >-
            Issue a credit note to adjust the amount of a finalized invoice. For a
            status=open invoice, a credit note reducesits amount_due. For a
            status=paid invoice, a credit note does not affect its amount_due.
            Instead, it can resultin any combination of the following:Refund: create
            a new refund (using refund_amount) or link an existing refund (using
            refund).Customer balance credit: credit the customer’s balance (using
            credit_amount) which will be automatically applied to their next invoice
            when it’s finalized.Outside of Stripe credit: record the amount that is
            or will be credited outside of Stripe (using out_of_band_amount).For
            post-payment credit notes the sum of the refund, credit and outside of
            Stripe amounts must equal the credit note total.You may issue multiple
            credit notes for an invoice. Each credit note will increment the
            invoice’s pre_payment_credit_notes_amountor
            post_payment_credit_notes_amount depending on its status at the time of
            credit note creation.
          operationId: postCreditNotes
          requestBody:
            required: true
            content:
              application/x-www-form-urlencoded:
                encoding:
                  expand:
                    explode: true
                    style: deepObject
                  lines:
                    explode: true
                    style: deepObject
                  metadata:
                    explode: true
                    style: deepObject
                  shipping_cost:
                    explode: true
                    style: deepObject
                schema:
                  additionalProperties: false
                  $ref: '#/components/schemas/PostCreditNotesRequest'
          responses:
            default:
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/error'
              description: Error response.
