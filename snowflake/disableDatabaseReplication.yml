apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Disable Database Replication.
  description: >-
    Disables replication for this primary database, meaning no replica of this
    database (i.e. secondary database) in another account can be refreshed. Any
    secondary databases remain linked to the primary database, but requests to
    refresh a secondary database are denied.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Disable Database Replication.
      description: >-
        Disables replication for this primary database, meaning no replica of this
        database (i.e. secondary database) in another account can be refreshed. Any
        secondary databases remain linked to the primary database, but requests to
        refresh a secondary database are denied.
    paths:
      /api/v2/databases/{name}/replication:disable:
        post:
          summary: Disable Database Replication.
          description: >-
            Disables replication for this primary database, meaning no replica of
            this database (i.e. secondary database) in another account can be
            refreshed. Any secondary databases remain linked to the primary
            database, but requests to refresh a secondary database are denied.
          operationId: disableDatabaseReplication
          requestBody:
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/AccountIdentifiers'
          responses:
            '504':
              $ref: common.yaml#/components/responses/504GatewayTimeout
