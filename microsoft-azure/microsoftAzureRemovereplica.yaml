apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: microsoftAzureRemovereplica
  description: >-
    This API simulates a Service Fabric replica failure by removing a replica
    from a Service Fabric cluster. The removal closes the replica, transitions
    the replica to the role None, and then removes all of the state information
    of the replica from the cluster. This API tests the replica state removal
    path, and simulates the report fault permanent path through client APIs.
    Warning - There are no safety checks performed when this API is used.
    Incorrect use of this API can lead to data loss for stateful services. In
    addition, the forceRemove flag impacts all other replicas hosted in the same
    process.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: 'Removes A Service Replica Running On A Node '
      description: >-
        This API simulates a Service Fabric replica failure by removing a replica
        from a Service Fabric cluster. The removal closes the replica, transitions
        the replica to the role None, and then removes all of the state information
        of the replica from the cluster. This API tests the replica state removal
        path, and simulates the report fault permanent path through client APIs.
        Warning - There are no safety checks performed when this API is used.
        Incorrect use of this API can lead to data loss for stateful services. In
        addition, the forceRemove flag impacts all other replicas hosted in the same
        process.
    paths:
      /Nodes/{nodeName}/$/GetPartitions/{partitionId}/$/GetReplicas/{replicaId}/$/Delete:
        post:
          summary: 'Removes A Service Replica Running On A Node '
          description: >-
            This API simulates a Service Fabric replica failure by removing a
            replica from a Service Fabric cluster. The removal closes the replica,
            transitions the replica to the role None, and then removes all of the
            state information of the replica from the cluster. This API tests the
            replica state removal path, and simulates the report fault permanent
            path through client APIs. Warning - There are no safety checks performed
            when this API is used. Incorrect use of this API can lead to data loss
            for stateful services. In addition, the forceRemove flag impacts all
            other replicas hosted in the same process.
          operationId: microsoftAzureRemovereplica
          responses:
            default:
              description: The detailed error response.
              schema:
                $ref: '#/definitions/FabricError'
