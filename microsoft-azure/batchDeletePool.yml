apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Deletes A Pool From The Specified Account.
  description: >-
    When you request that a Pool be deleted, the following actions occur: the
    Poolstate is set to deleting; any ongoing resize operation on the Pool are
    stopped;the Batch service starts resizing the Pool to zero Compute Nodes;
    any Tasksrunning on existing Compute Nodes are terminated and requeued (as
    if a resizePool operation had been requested with the default requeue
    option); finally,the Pool is removed from the system. Because running Tasks
    are requeued, theuser can rerun these Tasks by updating their Job to target
    a different Pool.The Tasks can then run on the new Pool. If you want to
    override the requeuebehavior, then you should call resize Pool explicitly to
    shrink the Pool tozero size before deleting the Pool. If you call an Update,
    Patch or Delete APIon a Pool in the deleting state, it will fail with HTTP
    status code 409 witherror code PoolBeingDeleted.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Deletes A Pool From The Specified Account.
      description: >-
        When you request that a Pool be deleted, the following actions occur: the
        Poolstate is set to deleting; any ongoing resize operation on the Pool are
        stopped;the Batch service starts resizing the Pool to zero Compute Nodes;
        any Tasksrunning on existing Compute Nodes are terminated and requeued (as
        if a resizePool operation had been requested with the default requeue
        option); finally,the Pool is removed from the system. Because running Tasks
        are requeued, theuser can rerun these Tasks by updating their Job to target
        a different Pool.The Tasks can then run on the new Pool. If you want to
        override the requeuebehavior, then you should call resize Pool explicitly to
        shrink the Pool tozero size before deleting the Pool. If you call an Update,
        Patch or Delete APIon a Pool in the deleting state, it will fail with HTTP
        status code 409 witherror code PoolBeingDeleted.
    paths:
      /pools/{poolId}:
        delete:
          summary: Deletes A Pool From The Specified Account.
          description: >-
            When you request that a Pool be deleted, the following actions occur:
            the Poolstate is set to deleting; any ongoing resize operation on the
            Pool are stopped;the Batch service starts resizing the Pool to zero
            Compute Nodes; any Tasksrunning on existing Compute Nodes are terminated
            and requeued (as if a resizePool operation had been requested with the
            default requeue option); finally,the Pool is removed from the system.
            Because running Tasks are requeued, theuser can rerun these Tasks by
            updating their Job to target a different Pool.The Tasks can then run on
            the new Pool. If you want to override the requeuebehavior, then you
            should call resize Pool explicitly to shrink the Pool tozero size before
            deleting the Pool. If you call an Update, Patch or Delete APIon a Pool
            in the deleting state, it will fail with HTTP status code 409 witherror
            code PoolBeingDeleted.
          operationId: batchDeletePool
          responses:
            default:
              description: An unexpected error response.
              schema:
                $ref: '#/definitions/BatchError'
