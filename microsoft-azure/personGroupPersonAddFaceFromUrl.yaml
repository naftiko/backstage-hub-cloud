apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: post-persongroups-persongroupid-persons-personid-persistedfaces
  description: >-
    Add a face to a person into a person group for face identification or
    verification. To deal with an image contains multiple faces, input face can
    be specified as an image with a targetFace rectangle. It returns a
    persistedFaceId representing the added face. No image will be stored. Only
    the extracted face feature will be stored on server until [PersonGroup
    PersonFace -
    Delete](https://docs.microsoft.com/rest/api/faceapi/persongroupperson/deleteface),
    [PersonGroup Person -
    Delete](https://docs.microsoft.com/rest/api/faceapi/persongroupperson/delete)
    or [PersonGroup -
    Delete](https://docs.microsoft.com/rest/api/faceapi/persongroup/delete) is
    called. Note persistedFaceId is different from faceId generated by [Face -
    Detect](https://docs.microsoft.com/rest/api/faceapi/face/detectwithurl).*  
    Higher face image quality means better recognition precision. Please
    consider high-quality faces: frontal, clear, and face size is 200x200 pixels
    (100 pixels between eyes) or bigger.*   Each person entry can hold up to 248
    faces.*   JPEG, PNG, GIF (the first frame), and BMP format are supported.
    The allowed image file size is from 1KB to 6MB.*   "targetFace" rectangle
    should contain one face. Zero or multiple faces will be regarded as an
    error. If the provided "targetFace" rectangle is not returned from [Face -
    Detect](https://docs.microsoft.com/rest/api/faceapi/face/detectwithurl),
    there’s no guarantee to detect and add the face successfully.*   Out of
    detectable face size (36x36 - 4096x4096 pixels), large head-pose, or large
    occlusions will cause failures.*   Adding/deleting faces to/from a same
    person will be processed sequentially. Adding/deleting faces to/from
    different persons are processed in parallel.* The minimum detectable face
    size is 36x36 pixels in an image no larger than 1920x1080 pixels. Images
    with dimensions higher than 1920x1080 pixels will need a proportionally
    larger minimum face size.* Different 'detectionModel' values can be
    provided. To use and compare different detection models, please refer to
    [How to specify a detection
    model](https://docs.microsoft.com/azure/cognitive-services/face/face-api-how-to-topics/specify-detection-model).
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Post Persongroups Persongroupid Persons Personid Persistedfaces
      description: >-
        Add a face to a person into a person group for face identification or
        verification. To deal with an image contains multiple faces, input face can
        be specified as an image with a targetFace rectangle. It returns a
        persistedFaceId representing the added face. No image will be stored. Only
        the extracted face feature will be stored on server until [PersonGroup
        PersonFace -
        Delete](https://docs.microsoft.com/rest/api/faceapi/persongroupperson/deleteface),
        [PersonGroup Person -
        Delete](https://docs.microsoft.com/rest/api/faceapi/persongroupperson/delete)
        or [PersonGroup -
        Delete](https://docs.microsoft.com/rest/api/faceapi/persongroup/delete) is
        called. Note persistedFaceId is different from faceId generated by [Face -
        Detect](https://docs.microsoft.com/rest/api/faceapi/face/detectwithurl).*  
        Higher face image quality means better recognition precision. Please
        consider high-quality faces: frontal, clear, and face size is 200x200 pixels
        (100 pixels between eyes) or bigger.*   Each person entry can hold up to 248
        faces.*   JPEG, PNG, GIF (the first frame), and BMP format are supported.
        The allowed image file size is from 1KB to 6MB.*   "targetFace" rectangle
        should contain one face. Zero or multiple faces will be regarded as an
        error. If the provided "targetFace" rectangle is not returned from [Face -
        Detect](https://docs.microsoft.com/rest/api/faceapi/face/detectwithurl),
        there’s no guarantee to detect and add the face successfully.*   Out of
        detectable face size (36x36 - 4096x4096 pixels), large head-pose, or large
        occlusions will cause failures.*   Adding/deleting faces to/from a same
        person will be processed sequentially. Adding/deleting faces to/from
        different persons are processed in parallel.* The minimum detectable face
        size is 36x36 pixels in an image no larger than 1920x1080 pixels. Images
        with dimensions higher than 1920x1080 pixels will need a proportionally
        larger minimum face size.* Different 'detectionModel' values can be
        provided. To use and compare different detection models, please refer to
        [How to specify a detection
        model](https://docs.microsoft.com/azure/cognitive-services/face/face-api-how-to-topics/specify-detection-model).
    paths:
      /persongroups/{personGroupId}/persons/{personId}/persistedfaces:
        post:
          summary: Post Persongroups Persongroupid Persons Personid Persistedfaces
          description: >-
            Add a face to a person into a person group for face identification or
            verification. To deal with an image contains multiple faces, input face
            can be specified as an image with a targetFace rectangle. It returns a
            persistedFaceId representing the added face. No image will be stored.
            Only the extracted face feature will be stored on server until
            [PersonGroup PersonFace -
            Delete](https://docs.microsoft.com/rest/api/faceapi/persongroupperson/deleteface),
            [PersonGroup Person -
            Delete](https://docs.microsoft.com/rest/api/faceapi/persongroupperson/delete)
            or [PersonGroup -
            Delete](https://docs.microsoft.com/rest/api/faceapi/persongroup/delete)
            is called. Note persistedFaceId is different from faceId generated by
            [Face -
            Detect](https://docs.microsoft.com/rest/api/faceapi/face/detectwithurl).*  
            Higher face image quality means better recognition precision. Please
            consider high-quality faces: frontal, clear, and face size is 200x200
            pixels (100 pixels between eyes) or bigger.*   Each person entry can
            hold up to 248 faces.*   JPEG, PNG, GIF (the first frame), and BMP
            format are supported. The allowed image file size is from 1KB to 6MB.*  
            "targetFace" rectangle should contain one face. Zero or multiple faces
            will be regarded as an error. If the provided "targetFace" rectangle is
            not returned from [Face -
            Detect](https://docs.microsoft.com/rest/api/faceapi/face/detectwithurl),
            there’s no guarantee to detect and add the face successfully.*   Out of
            detectable face size (36x36 - 4096x4096 pixels), large head-pose, or
            large occlusions will cause failures.*   Adding/deleting faces to/from a
            same person will be processed sequentially. Adding/deleting faces
            to/from different persons are processed in parallel.* The minimum
            detectable face size is 36x36 pixels in an image no larger than
            1920x1080 pixels. Images with dimensions higher than 1920x1080 pixels
            will need a proportionally larger minimum face size.* Different
            'detectionModel' values can be provided. To use and compare different
            detection models, please refer to [How to specify a detection
            model](https://docs.microsoft.com/azure/cognitive-services/face/face-api-how-to-topics/specify-detection-model).
          operationId: personGroupPersonAddFaceFromUrl
          responses:
            default:
              description: Error response.
              schema:
                $ref: '#/definitions/APIError'
