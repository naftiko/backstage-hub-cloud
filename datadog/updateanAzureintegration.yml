apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Update An Azure Integration
  description: >-
    Update a Datadog-Azure integration. Requires an existing `tenant_name` and
    `client_id`.Any other fields supplied will overwrite existing values. To
    overwrite `tenant_name` or `client_id`,use `new_tenant_name` and
    `new_client_id`. To leave a field unchanged, do not supply that field in the
    payload.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Update An Azure Integration
      description: >-
        Update a Datadog-Azure integration. Requires an existing `tenant_name` and
        `client_id`.Any other fields supplied will overwrite existing values. To
        overwrite `tenant_name` or `client_id`,use `new_tenant_name` and
        `new_client_id`. To leave a field unchanged, do not supply that field in the
        payload.
    paths:
      /api/v1/integration/azure:
        put:
          summary: Update An Azure Integration
          description: >-
            Update a Datadog-Azure integration. Requires an existing `tenant_name`
            and `client_id`.Any other fields supplied will overwrite existing
            values. To overwrite `tenant_name` or `client_id`,use `new_tenant_name`
            and `new_client_id`. To leave a field unchanged, do not supply that
            field in the payload.
          operationId: updateanAzureintegration
          requestBody:
            content:
              application/json:
                schema:
                  type: object
                  example:
                    app_service_plan_filters: key:value,filter:example
                    automute: true
                    client_id: testc7f6-1234-5678-9101-3fcbf464test
                    client_secret: testingx./Sw*g/Y33t..R1cH+hScMDt
                    container_app_filters: key:value,filter:example
                    cspm_enabled: true
                    custom_metrics_enabled: true
                    errors:
                      - '*'
                    host_filters: key:value,filter:example
                    new_client_id: new1c7f6-1234-5678-9101-3fcbf464test
                    new_tenant_name: new1c44-1234-5678-9101-cc00736ftest
                    resource_collection_enabled: true
                    tenant_name: testc44-1234-5678-9101-cc00736ftest
          responses:
            '429':
              description: Too Many Requests
              headers:
                Content-Type:
                  schema:
                    type: string
                    example: application/json
              content:
                application/json:
                  schema:
                    type: object
                  example:
                    errors:
                      - Bad Request
                      - Bad Request
