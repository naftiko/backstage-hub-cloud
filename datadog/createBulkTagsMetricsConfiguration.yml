apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Configure Tags For Multiple Metrics
  description: >-
    Create and define a list of queryable tag keys for a set of existing count,
    gauge, rate, and distribution metrics.Metrics are selected by passing a
    metric name prefix. Use the Delete method of this API path to remove tag
    configurations.Results can be sent to a set of account email addresses, just
    like the same operation in the Datadog web app.If multiple calls include the
    same metric, the last configuration applied (not by submit order) is used,
    do notexpect deterministic ordering of concurrent calls. The
    `exclude_tags_mode` value will set all metrics that match the prefix tothe
    same exclusion state, metric tag configurations do not support mixed
    inclusion and exclusion for tags on the same metric.Can only be used with
    application keys of users with the `Manage Tags for Metrics` permission.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Configure Tags For Multiple Metrics
      description: >-
        Create and define a list of queryable tag keys for a set of existing count,
        gauge, rate, and distribution metrics.Metrics are selected by passing a
        metric name prefix. Use the Delete method of this API path to remove tag
        configurations.Results can be sent to a set of account email addresses, just
        like the same operation in the Datadog web app.If multiple calls include the
        same metric, the last configuration applied (not by submit order) is used,
        do notexpect deterministic ordering of concurrent calls. The
        `exclude_tags_mode` value will set all metrics that match the prefix tothe
        same exclusion state, metric tag configurations do not support mixed
        inclusion and exclusion for tags on the same metric.Can only be used with
        application keys of users with the `Manage Tags for Metrics` permission.
    paths:
      /api/v2/metrics/config/bulk-tags:
        post:
          summary: Configure Tags For Multiple Metrics
          description: >-
            Create and define a list of queryable tag keys for a set of existing
            count, gauge, rate, and distribution metrics.Metrics are selected by
            passing a metric name prefix. Use the Delete method of this API path to
            remove tag configurations.Results can be sent to a set of account email
            addresses, just like the same operation in the Datadog web app.If
            multiple calls include the same metric, the last configuration applied
            (not by submit order) is used, do notexpect deterministic ordering of
            concurrent calls. The `exclude_tags_mode` value will set all metrics
            that match the prefix tothe same exclusion state, metric tag
            configurations do not support mixed inclusion and exclusion for tags on
            the same metric.Can only be used with application keys of users with the
            `Manage Tags for Metrics` permission.
          operationId: createBulkTagsMetricsConfiguration
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/MetricBulkTagConfigCreateRequest'
          responses:
            '429':
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/APIErrorResponse'
              description: Too Many Requests
