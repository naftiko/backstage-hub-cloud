apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: Get Monthly Cost Attribution
  description: >-
    Get monthly cost attribution by tag across multi-org and single root-org
    accounts.Cost Attribution data for a given month becomes available no later
    than the 19th of the following month.This API endpoint is paginated. To make
    sure you receive all records, check if the value of `next_record_id` isset
    in the response. If it is, make another request and pass `next_record_id` as
    a parameter.Pseudo code example:```response :=
    GetMonthlyCostAttribution(start_month, end_month)cursor :=
    response.metadata.pagination.next_record_idWHILE cursor != null BEGIN 
    sleep(5 seconds)  # Avoid running into rate limit  response :=
    GetMonthlyCostAttribution(start_month, end_month, next_record_id=cursor) 
    cursor := response.metadata.pagination.next_record_idEND```This endpoint is
    only accessible for [parent-level
    organizations](https://docs.datadoghq.com/account_management/multi_organization/).
    This endpoint is not available in the Government (US1-FED) site.
  tags: []
  links:
    - title: Link
      icon: code
      url: https://example.com
spec:
  type: openapi
  lifecycle: experimental
  owner: team-c
  definition: |
    openapi: 3.1.0
    info:
      title: Get Monthly Cost Attribution
      description: >-
        Get monthly cost attribution by tag across multi-org and single root-org
        accounts.Cost Attribution data for a given month becomes available no later
        than the 19th of the following month.This API endpoint is paginated. To make
        sure you receive all records, check if the value of `next_record_id` isset
        in the response. If it is, make another request and pass `next_record_id` as
        a parameter.Pseudo code example:```response :=
        GetMonthlyCostAttribution(start_month, end_month)cursor :=
        response.metadata.pagination.next_record_idWHILE cursor != null BEGIN 
        sleep(5 seconds)  # Avoid running into rate limit  response :=
        GetMonthlyCostAttribution(start_month, end_month, next_record_id=cursor) 
        cursor := response.metadata.pagination.next_record_idEND```This endpoint is
        only accessible for [parent-level
        organizations](https://docs.datadoghq.com/account_management/multi_organization/).
        This endpoint is not available in the Government (US1-FED) site.
    paths:
      /api/v2/cost_by_tag/monthly_cost_attribution:
        get:
          summary: Get Monthly Cost Attribution
          description: >-
            Get monthly cost attribution by tag across multi-org and single root-org
            accounts.Cost Attribution data for a given month becomes available no
            later than the 19th of the following month.This API endpoint is
            paginated. To make sure you receive all records, check if the value of
            `next_record_id` isset in the response. If it is, make another request
            and pass `next_record_id` as a parameter.Pseudo code example:```response
            := GetMonthlyCostAttribution(start_month, end_month)cursor :=
            response.metadata.pagination.next_record_idWHILE cursor != null BEGIN 
            sleep(5 seconds)  # Avoid running into rate limit  response :=
            GetMonthlyCostAttribution(start_month, end_month,
            next_record_id=cursor)  cursor :=
            response.metadata.pagination.next_record_idEND```This endpoint is only
            accessible for [parent-level
            organizations](https://docs.datadoghq.com/account_management/multi_organization/).
            This endpoint is not available in the Government (US1-FED) site.
          operationId: getMonthlyCostAttribution
          responses:
            '429':
              content:
                application/json;datetime-format=rfc3339:
                  schema:
                    $ref: '#/components/schemas/APIErrorResponse'
              description: Too many requests
